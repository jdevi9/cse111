(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.CaptionDataModel=function(t){this.kind="subtitles";this.label=n.helpers.languages[t.Language];this.src=t.Url;this.srclang=t.Language}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.EpisodeDataModel=function(t){var i=t.Type=="Session"||t.Event!==undefined,r;this.contentId=t.ID;this.contentType=i?n.ContentType.session:t.Area!==undefined||t.Type=="Shows"||t.Type=="Series"||t.Type=="Blogs"?n.ContentType.entry:n.ContentType.oneoff;this.description=i&&t.Description!==null?t.Description:t.Body!==null?t.Body:"";this.releaseDate=n.helpers.getDateFromJson(t.PublishedDate||t.Published);this.images={playerPreview:n.helpers.getSecureUri(t.PreviewImage||t.VideoPlayerPreviewImage||(i?t.FeaturedImage:t.LargeThumbnail)||t.Thumbnail),large:n.helpers.getSecureUri(i?t.FeaturedImage||t.VideoPlayerPreviewImage:t.PreviewImage||t.LargeThumbnail||t.VideoPlayerPreviewImage||t.Thumbnail),medium:n.helpers.getSecureUri(i?t.Thumbnail:t.PreviewImage||t.MediumThumbnail||t.SmallThumbnail||t.Thumbnail),small:n.helpers.getSecureUri(i?t.Thumbnail:t.PreviewImage||t.SmallThumbnail||t.MediumThumbnail||t.Thumbnail)};this.videos=[{type:"mp4high",src:n.helpers.getSecureUri(t.VideoMP4High)},{type:"mp4medium",src:n.helpers.getSecureUri(t.VideoMP4Medium)},{type:"mp4low",src:n.helpers.getSecureUri(t.VideoMP4Low)},{type:"wmvhigh",src:n.helpers.getSecureUri(t.VideoWMVHQ)},{type:"wmvmedium",src:n.helpers.getSecureUri(t.VideoWMV)},{type:"smooth",src:n.helpers.getSecureUri(t.VideoSmooth)}];this.isLive=!1;this.length=t.MediaLengthInSeconds!==undefined?t.MediaLengthInSeconds:t.Duration!==undefined?t.Duration:0;this.title=t.Title!==undefined?t.Title:"";this.series=i?new n.Models.SeriesDataModel(t.Event):t.Area!==undefined?new n.Models.SeriesDataModel(t.Area):t.Subscription!=undefined?new n.Models.SeriesDataModel(t.Subscription):new n.Models.SeriesDataModel({Description:"One-off blog posts.",DisplayName:"Posts"});this.api=i?"/Sessions(guid'"+t.ID+"')/":"/Entries(guid'"+t.ID+"')/";this.relatedApi="/Related?id="+t.ID;this.tags=t.Tags!==undefined&&typeof t.Tags.map=="function"?t.Tags.map(function(t){return new n.Models.TagDataModel(t,i)}):[];r=i?t.Speakers:t.Authors;this.niners=r!==undefined&&typeof r.map=="function"?r.map(function(t){return new n.Models.NinerDataModel(t,i)}):[];this.captions=t.Captions!==undefined&&typeof t.Captions.map=="function"?t.Captions.map(function(t){return new n.Models.CaptionDataModel(t)}).sort(function(n,t){return n.label===t.label?0:n.label<t.label?-1:1}):[];this.averageRating=t.Rating;this.permalink=t.Permalink;this.inQueue=t.InQueue;this.progress=t.LastViewedPosition;this.userRating=t.CurrentRating}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.NinerDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.speaker:n.ContentType.author;this.uniqueName=t.Name;this.title=t.DisplayName||t.FullName||t.Name||t.UrlSafeName;this.images={avatar:n.helpers.removeProtocol(t.Avatar||t.Photo),wideTile:n.helpers.removeProtocol(t.Avatar||t.Photo),smallTile:n.helpers.removeProtocol(t.Avatar||t.Photo)};this.languages=t.Languages||[];this.profileUri="//channel9.msdn.com/niners/"+t.Name;this.api=i?"/Speakers(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers":"/Users(guid'"+t.ID+"')/Entries?$expand=Area,Tags,Authors"}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.SeriesDataModel=function(t){var i=t.EventGroup!==undefined&&t.EventGroup!==null||t.Type=="Event";this.contentId=t.ContainerId!==undefined?t.ContainerId:t.ID;this.contentType=i?n.ContentType.event:n.ContentType.area;this.description=t.Description!=null?t.Description:"";this.releaseDate=n.helpers.getDateFromJson(i?t.Starts:t.MostRecentEntry||t.Created);this.images={banner:n.helpers.getSecureUri(t.BannerImage),wideTile:n.helpers.getSecureUri(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage||t.Thumbnail),smallTile:n.helpers.getSecureUri(t.ThumbnailImage||t.SmallThumbnailImage||t.Thumbnail),large:n.helpers.getSecureUri(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage||t.Thumbnail),medium:n.helpers.getSecureUri(t.WideScreenThumbnailImage||t.ThumbnailImage||t.SmallThumbnailImage||t.Thumbnail),small:n.helpers.getSecureUri(t.SmallThumbnailImage||t.WideScreenThumbnailImage||t.ThumbnailImage||t.Thumbnail)};this.title=t.DisplayName!==undefined?t.DisplayName:t.Title!==undefined?t.Title:"";this.api=i?"/Events(guid'"+t.ID+"')/Sessions?$expand=Event,Speakers&$orderby=Track%20desc":t.ID?"/Areas(guid'"+t.ID+"')/Entries?$expand=Area,Authors,Tags":"";this.seasonsApi=i?"/Events(guid'"+t.ID+"')/Sessions/Groups?groupby=track":t.ID?"/Areas(guid'"+t.ID+"')/Entries/Groups?groupby=year":"";this.permalink=t.Permalink}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.TagDataModel=function(t,i){this.contentId=t.ID;this.contentType=i?n.ContentType.eventTag:n.ContentType.tag;this.uniqueName=t.Name;this.title=t.DisplayName!==undefined?t.DisplayName:t.Title!==undefined?t.Title:"";this.api=t.ID!==undefined?"/Tags(guid'"+t.ID+"')"+(i?"/Sessions?$expand=Event,Speakers":"/Entries?$expand=Area,Tags,Authors"):""}})();
(function(){"use strict";var n=ch9.functions;n.Models&&typeof n.Models!="undefined"||(n.Models={});n.Models.SearchResultDataModel=function(t){var r=t.type?t.type.toLowerCase()==n.ContentType.session:!1,u,i;this.contentId=t.id;this.contentType=r?n.ContentType.session:t.type!==undefined?n.ContentType.entry:n.ContentType.oneoff;this.description=t.body!==null?t.body:t.summary!==null?t.summary:"";t.description&&this.contentType==n.ContentType.oneoff&&(t.summary=t.description.substring(0,200));this.summary=t.summary?t.summary.replace(/<\/p>/g," "):"";u=document.createElement("DIV");u.innerHTML=this.summary;this.summary=u.textContent.trim()||u.innerText.trim()||"";this.releaseDate=n.helpers.getDateFromJson(t.published);i=function(n){return(n||"").replace("files.channel9.msdn.com","f.ch9.ms")};this.images={playerPreview:t.largePreviewImage?i(n.helpers.removeProtocol(t.largePreviewImage)):t.image||"",large:t.largePreviewImage?i(n.helpers.removeProtocol(t.largePreviewImage)):t.image||"",medium:t.mediumPreviewImage?i(n.helpers.removeProtocol(t.mediumPreviewImage)):t.image||"",small:t.previewImage?i(n.helpers.removeProtocol(t.previewImage)):t.image||""};this.videos=[];this.isLive=!1;this.length=t.mediaDuration!==undefined?t.mediaDuration/60:0;this.title=t.title!==undefined?t.title:t.name!==undefined?t.name:"";this.series=t.groupUrl||this.contentType==n.ContentType.oneoff?new n.Models.SeriesDataModel({DisplayName:t.groupName?t.groupName||"":this.contentType==n.ContentType.oneoff?"Microsoft Virtual Academy":"",Permalink:t.groupUrl?t.groupUrl||"":this.contentType==n.ContentType.oneoff?"https://mva.microsoft.com/":"",EventGroup:r?{}:null}):null;this.api=r?"/Sessions(guid'"+t.id+"')/":"/Entries(guid'"+t.id+"')/";this.relatedApi="/Related?id="+t.id;this.tags=t.tags!==undefined&&typeof t.tags.map=="function"?t.tags.map(function(t){return new n.Models.TagDataModel({Name:t,DisplayName:t},r)}):[];this.niners=[];this.captions=t.captionLanguages!==undefined&&typeof t.captionLanguages.map=="function"?t.captionLanguages.map(function(t){return new n.Models.CaptionDataModel({Language:t})}).sort(function(n,t){return n.label===t.label?0:n.label<t.label?-1:1}):[];t.rating?(this.averageRating=t.rating.average,this.ratingCount=t.rating.count):(this.averageRating=0,this.ratingCount=0);this.permalink=t.url;this.inQueue=!1;this.progress=null;this.userRating=null}})();
(function(){"use strict";var n=ch9.functions,r=n.helpers,t=r.debug,i="//"+window.location.host+"/odata",f=r.searchEndpoint+"documents",u=function(n){var t=[];return n.value!==undefined?n.value.forEach(function(n){t.push(n)}):n.documents!==undefined?n.documents.forEach(function(n){n.data!==undefined?t.push(n.data):t.push(n)}):n.data!==undefined?n.data.forEach(function(n){t.push(n)}):n.Subscriptions!==undefined?n.Subscriptions.forEach(function(n){t.push(n)}):n.SubscriptionContent!==undefined?n.SubscriptionContent.forEach(function(n){t.push(n)}):t.push(n),t};n.ContentType={entry:"entry",session:"session",oneoff:"oneoff",area:"area",event:"event",speaker:"speaker",author:"author",tag:"tag",eventTag:"eventTag"};n.Services={Series:{getData:function(t,i,r){t=t||n.ContentType.SeriesFilter.shows;var f="series"+t,u="/Areas?$filter=Type%20eq%20'"+t+"'&$orderby=MostRecentEntry%20desc";return t==n.ContentType.SeriesFilter.events&&(u="/Events?$orderby=Starts%20desc"),i=i||25,n.Services.Channel9DataSource({cacheName:f,source:u,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.SeriesDataModel(t)}).slice(0,i)})},getSeries:function(t,i){if(t&&t!="undefined"){i=i||n.ContentType.area;var u="series"+i+t,r="/Areas(guid'"+t+"')";return i==n.ContentType.event&&(r="/Events(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.SeriesDataModel(t)});return i[0]})}return $.when(null)}},Episodes:{getFeaturedData:function(t,i){return n.Services.Channel9DataSource({cacheName:"featured",source:"/Featured?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getNewReleaseData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"newreleases",source:"/Entries?$expand=Area,Authors,Tags&$filter=Freshness%20ne%20null&$orderby=Freshness%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getPopularData:function(t,i){return t=t||25,n.Services.Channel9DataSource({cacheName:"popular",source:"/Entries?$expand=Area,Authors,Tags&$orderby=ViewsThisWeek%20desc",count:t,skipCache:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getQueueData:function(t,i){return t=t||50,n.Services.Channel9DataSource({source:"/Queue?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,Channel9.ODataModel.Entry/Authors,Channel9.ODataModel.Entry/Tags",count:null,useAuth:!0,skip:i}).then(function(i){if(i.message!==undefined)return[];return i.map(function(t){return new n.Models.EpisodeDataModel(t)}).slice(0,t)})},getSubscriptions:function(t,i,r){var u="//"+window.location.host+"/Niners/"+t+"/Subscriptions/Json?Type="+(i||"Show");return r>1&&(u=u+"&PageNumber="+r),n.Services.Channel9DataSource({source:u,useAuth:!0}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.SeriesDataModel(t)})})},getSubscriptionContent:function(t,i,r){var u="//"+window.location.host+"/Niners/"+t+"/Subscriptions/Content/Json?SubscriptionType="+(i||"Show");return r>1&&(u=u+"&PageNumber="+r),n.Services.Channel9DataSource({source:u,useAuth:!0}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})},getData:function(t,i,r,u){if(t){var f="episodes"+t.contentId,e=t.episodesApi;return r=r||25,n.Services.Channel9DataSource({cacheName:f,source:e,count:r,skipCache:u}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedData:function(t,i,r){if(t){var u="relatedepisodes"+t.contentId,f=t.relatedApi;return i=i||25,n.Services.Channel9DataSource({cacheName:u,source:f,count:i,skipCache:r}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})}return $.when([])},getRelatedEpisodes:function(t,i){return t?n.Services.Channel9DataSource({source:t}).then(function(t){if(t.message!==undefined)return[];var r=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return r.slice(0,i)}):$.when([])},getEpisode:function(t,i){if(t){var u=t.contentType||n.ContentType.session,f="episode"+t.contentId+i,r="/Entries(guid'"+t.contentId+"')?$expand=Area,Tags,Authors";return u==n.ContentType.session&&(r="/Sessions(guid'"+t.contentId+"')?$expand=Event,Speakers"),n.Services.Channel9DataSource({cacheName:f,source:r,useAuth:i}).then(function(t){if(t.message!==undefined)return null;var i=t.map(function(t){return new n.Models.EpisodeDataModel(t)});return i[0]})}return $.when(null)},search:function(t,i){if(t.searchTerm===undefined||t.searchTerm=="")return $.when([]);var r="episodessearch"+t.searchTerm,u=t.searchTerm.indexOf("undefined")>-1?t.searchTerm.replace("undefined",""):t.searchTerm,f="/Search?$expand=Channel9.ODataModel.Entry/Area,Channel9.ODataModel.Session/Event,&query="+u;return i=i||25,n.Services.Channel9DataSource({cacheName:r,source:f,count:i}).then(function(t){if(t.message!==undefined)return[];return t.map(function(t){return new n.Models.EpisodeDataModel(t)})})},AzureSearch:function(t){if(t.text===undefined||t.text=="")return $.when([]);var i="azuresearch"+t.text;return t.count=t.count||15,n.Services.Channel9SearchData({text:t.text,pageNumber:t.pageNumber,count:t.count,filter:t.filter,sortBy:t.sortBy}).then(function(t){if(t.message!==undefined)return{totalCount:0,results:[]};var i=t.results.map(function(t){return new n.Models.SearchResultDataModel(t)});return{totalCount:t.totalCount,searchId:t.searchId||"",results:i}})}},Niners:{getNiner:function(t,i){if(t){i=i||n.ContentType.author;var u="niner"+i,r="/Users(guid'"+t+"')";return i==n.ContentType.speaker&&(r="/Speakers(guid'"+t+"')"),n.Services.Channel9DataSource({cacheName:u,source:r}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.NinerDataModel(t,i==n.ContentType.speaker)});return r[0]})}return $.when(null)},getAuthenticatedNiner:function(){return n.Services.Channel9DataSource({cacheName:"user",source:"/Users/Me",count:1,useAuth:!0}).then(function(t){if(t&&t.message===undefined){var i=t.map(function(t){return new n.Models.NinerDataModel(t)});return i[0]}return null})}},Tags:{getTag:function(t,i){if(t){i=i||n.ContentType.tag;var r=i+t,u="/Tags(guid'"+t+"')";return n.Services.Channel9DataSource({cacheName:r,source:u}).then(function(t){if(t.message!==undefined)return null;var r=t.map(function(t){return new n.Models.TagDataModel(t,i==n.ContentType.eventTag)});return r[0]})}return $.when(null)}},addToQueue:function(t){var i=t.api.split("?")[0]+"AddToQueue";return n.Services.Channel9PostData(i,null)},removeFromQueue:function(t){var i=t.api.split("?")[0]+"RemoveFromQueue";return n.Services.Channel9PostData(i,null)},removeFromQueueByUrl:function(t){return n.Services.Channel9PostData(t,null)},isInQueue:function(t){return n.Services.Episodes.getQueueData().then(function(n){for(var i=0;i<n.length;i++)if(n[i].contentId===t.contentId)return $.when(!0);return $.when(!1)})},Rating:{getRatingData:function(){return $.when([])}},addRating:function(t,i){var r=t.api.split("?")[0]+"Rate",u=JSON.stringify({Rating:i});return n.Services.Channel9PostData(r,u)},addVideoProgress:function(i,r,u){var e,f,o,s;i&&r&&r.isLoggedIn&&n.VideoPlayer&&((e=n.VideoPlayer.getPosition(),f=e/60,(i.progress==Math.floor(f)||e<1)&&!u)||(i.progress=Math.floor(f),o=i.api.split("?")[0]+"UpdateVideoProgress",s=JSON.stringify({Device:"Channel 9 Website",Progress:f.toString()}),n.Services.Channel9PostData(o,s).then(function(n){n.status=="200"||n.value==!0?t&&console.log("new progress update to db: "+f.toString()):t&&console.log("unsuccessful updating progress in db: "+n.status)},function(n){t&&console.log("error sending progress update to db: "+n.responseText)})))},Channel9DataSource:function(r){var s;if(!r.source)return $.when([]);var e=r.count||0,o=r.skip||0,f=r.source;return f.indexOf("//")<0&&(f=i+f),o>0&&(f=n.helpers.addQueryStringParam(f,"$skip="+o)),e>0&&(f=n.helpers.addQueryStringParam(f,"$top="+e)),t&&console.log("Making request: "+f),s=$.ajax({type:"GET",url:f,data:null,timeout:1e4}),$.when(s).then(function(n){if(!n)return[];try{return u(n)}catch(i){return t&&console.log("error: "+JSON.stringify(i)),[]}},function(n){return t&&console.log("error: "+JSON.stringify(n)),[]})},Channel9PostData:function(n,r){if(!n)return $.when([]);t&&console.log("Post data request: "+i+n+" "+r);var u=$.ajax({type:"POST",url:i+n,headers:{"Content-type":"application/javascript"},data:r,timeout:1e4});return $.when(u)},Channel9SearchData:function(i){var h;if(!i.text)return $.when([]);var r=n.helpers.addQueryStringParam(f,"text="+encodeURIComponent(i.text.replace(/\+\+/g,"\\+\\+"))),c=i.count||15,e=i.pageNumber||0,o=i.filter||"",s=i.sortBy||"";return r=n.helpers.addQueryStringParam(r,"pageSize="+c),r=n.helpers.addQueryStringParam(r,"pageNumber="+e),s&&(r=n.helpers.addQueryStringParam(r,"sortBy="+s)),o!=""&&(r=r.concat(o)),t&&console.log("Search request: "+r),h=$.ajax({dataType:"json",url:r,timeout:6e4}),$.when(h).then(function(n){if(!n)return{totalCount:0,results:[]};try{return n.pageNumber=e,{totalCount:n.total,searchId:n.id||"",results:u(n,e>1)}}catch(i){return t&&console.log("error: "+JSON.stringify(i)),{totalCount:0,results:[]}}},function(n){return t&&console.log("error: "+JSON.stringify(n)),{totalCount:0,results:[]}})}}})();
/*! jQuery UI - v1.12.1 - 2016-11-02
* http://jqueryui.com
* Includes: widget.js, data.js, scroll-parent.js, widgets/draggable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(l=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")}):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;t(document).on("mouseup",function(){s=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable});
(function(n){"use strict";var t=ch9.functions,i=t.helpers,e=t.Resources,u={background:"#333",height:"540",width:"960",isEmbed:window.location.href.indexOf("/player")>-1},o={webvtt:"WebVTT"},r={smooth:"smooth",progressive:"progressive",html5:"html5",officemix:"officemix",auto:"auto"},f=t.userAgent&&t.userAgent.isIOS()?"pagehide":"beforeunload",s=function(){var s=this,c=function(){var n=l();if(!s.player)return!1;s.player.playerPreference!=r.officemix||t.officemixPresenter.haveVideo||(s.player.playerPreference=r.auto);s.player.playerPreference==r.auto&&t.officemixPresenter.haveVideo&&(s.player.playerPreference=r.officemix);switch(s.player.playerPreference){case r.officemix:return t.officemixPresenter.isPlayPossible&&(n=t.officemixPresenter.create(n)),h(n),!1;case r.progressive:case r.smooth:return t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),h(n),!1;case r.html5:case r.auto:return t.silverlightPresenter.isPlayPossible&&(n=t.silverlightPresenter.create(n)),t.html5Presenter.isPlayPossible&&(n=t.html5Presenter.create(n)),h(n),!1}return h(n),!0},h=function(i){if(i&&i!=""&&s.playButton&&s.videoContainer){s.playButton.off("click.player").hide();s.videoContainer.css("display","block").html(i);t.userAgent.isIOS()||(s.playerContainer.append(n("<div>").addClass("progress large circles")),t.Spinner=new t.ProgressControlConstructor(n(".progress",s.playerContainer)),t.Spinner.show());var r=n("video.Player",s.videoContainer);r&&r[0]&&typeof r[0].play=="function"&&r[0].play()}},l=function(){ch9.functions.playerPresenter.hideSpinner=function(){function t(){ch9.functions.Spinner&&ch9.functions.Spinner.hide()}var n=document.createElement("img");n.onload=t;n.src="/styles/images/1998/shim.gif";n.style.display="block"};var n='<p><a href="'+s.player.defaultVideoUrl+'">'+e.getString("JsVideoPlayerClickToStart")+'<\/a><\/p><p><a href="//channel9.msdn.com/Blogs/Help/How-to-watch-videos" target="_blank">'+e.getString("JsVideoPlayerHowToWatch")+"<\/a><\/p>";return s.player&&s.player.width>600&&(n+=t.officemixPresenter?t.officemixPresenter.getErrorMessage():"",n+=t.html5Presenter?t.html5Presenter.getErrorMessage():"",n+=t.silverlightPresenter?t.silverlightPresenter.getErrorMessage():""),'<div class="error">'+n+'<script type="text/javascript">ch9.functions.playerPresenter.hideSpinner();<\/script><\/div>'},a=function(){u.isEmbed&&parent.postMessage("play button clicked","*")};return{isVideoPlaying:function(){return t.VideoPlayer&&t.VideoPlayer.isReady()},remove:function(){n(window).off(f+".player").off("hashchange.player");t.VideoPlayer&&typeof t.VideoPlayer!="undefined"&&(i.updateVideoProgress(s.episode.length),t.Services&&t.Services.addVideoProgress(s.episode,s.user,!0))},refresh:function(){var l,h,e;if((this.remove(),s.playerContainer=n(".playerContainer"),!(s.playerContainer.length<1))&&(s.videoContainer=n(".videoContainer",s.playerContainer),s.playButton=n("a.playButton",s.playerContainer),!(s.playButton.length<1))&&(l=s.playButton.css("background-image")&&s.playButton.css("background-image").length>4?s.playButton.css("background-image").substring(4,s.playButton.css("background-image").length-1).replace(/"/g,""):"",h=n("ul.mediacaptions a",s.playerContainer).map(function(){var t=n(this);return{url:t.attr("href"),format:t.attr("rel"),language:t.data("language"),label:t.data("label"),isdefault:!1}}).get(),h=n.grep(h,function(n){return typeof o[n.format]!="undefined"}).sort(function(n,t){return n.language.toLowerCase().localeCompare(t.language.toLowerCase())}),e=s.playButton.data("player"),e.defaultVideoUrl=s.playButton.attr("href"),e.container=s.playerContainer,e.height=s.playerContainer.height(),(e.height<1||!e.height)&&(e.height=s.playerContainer.find(".videoContainer").height()),e.width=s.playerContainer.width(),e.showEndOfVideo=i.getShowEndOfVideoFromUrl(),e.playerPreference=r[e.playerPreference]||r.html5,e.language=i.languages[e.language]?e.language:"",e.isSecure=e.isSecure&&e.isSecure.toString().toLowerCase()=="true",s.player=n.extend({},u,e),s.player)&&(s.episode=s.playButton.data("episode"),s.episode)){s.episode.captions=h;s.episode.contentId=s.episode.contentId.replace(/-/g,"");s.episode.images={playerPreview:l};s.episode.length=i.getDuration(s.episode.length);s.episode.isMVA=s.episode.isMVA&&s.episode.isMVA.toString().toLowerCase()=="true";s.user=s.playButton.data("user");s.user.isLoggedIn=s.user&&s.user.isLoggedIn&&s.user.isLoggedIn.toString().toLowerCase()=="true";s.user.name=n("body").data("username");s.user||(s.user={isLoggedIn:!1,name:""});t.html5Presenter=new t.Html5PresenterConstructor(s.player,s.episode,s.user);t.silverlightPresenter=new t.SilverlightPresenterConstructor(s.player,s.episode,s.user);t.officemixPresenter=new t.OfficemixPresenterConstructor(s.player,s.episode,s.user);t.videoOptions&&typeof t.videoOptions!="undefined"&&t.videoOptions.refresh();s.playButton.show().off("click.player").on("click.player",function(){return a(),c()});n(window).off(f+".player").on(f+".player",this.remove).off("hashchange.player").on("hashchange.player",this.checkToStartPlayer)}},checkToStartPlayer:function(){var e=i.getAutoPlayFromUrl(),o=i.getScrollToVideoFromUrl(),f=i.getStartTimeObjFromUrl(),h=i.getStartTimeObjFromStorage(),l=i.getCaptionLanguageFromUrl(),r,u;(s.episode&&s.episode.captions&&(r=n.grep(s.episode.captions,function(n){return n.language==l})[0],r&&(r.isdefault=!0)),u={source:"db",seconds:s.user.progress*60,paused:!0},s.startTime=f.seconds>0?f:u.seconds>0?u:h,e||s.startTime&&s.startTime.seconds&&!(s.startTime.seconds<=0))&&(t.VideoPlayer?t.VideoPlayer.seek(s.startTime):c(),o?i.scrollToVideo():i.scrollToVideoTitle())},getEmbedCode:function(n,t,u,f,e){var h=s.player.height,c=s.player.width,l,o;t&&!isNaN(t)&&(c=t,h=Math.round(t*.5625));l=i.basePageUrl().replace(/http:\/\//g,"//");o=["<iframe",' src="'+l+'/player{FORMAT}{LANGUAGE}{AUTOPLAY}{TIMECODE}"',' width="'+c+'"',' height="'+h+'"'," allowFullScreen",' frameBorder="0"',' title="'+i.getEpisodeTitle()+' - Microsoft Channel 9 Video"',"><\/iframe>"].join("");switch(n){case r.smooth:case r.progressive:case r.html5:case r.officemix:o=o.replace("{FORMAT}","?format="+n);break;case"auto":default:o=o.replace("{FORMAT}","")}return o=u?o.indexOf("#")>-1?o.replace("{LANGUAGE}","&ccLang="+u):o.replace("{LANGUAGE}","#ccLang="+u):o.replace("{LANGUAGE}",""),o=e?o.indexOf("#")>-1?o.replace("{TIMECODE}","&time="+e):o.replace("{TIMECODE}","#time="+e):o.replace("{TIMECODE}",""),f&&!e?o.indexOf("#")>-1?o.replace("{AUTOPLAY}","&autoplay"):o.replace("{AUTOPLAY}","#autoplay"):o.replace("{AUTOPLAY}","")},getContainer:function(){return s.playerContainer},getDefaultVideoUrl:function(){return s.player.defaultVideoUrl},getCaptions:function(){return s.episode.captions},getDuration:function(){return s.episode.length},getStartTime:function(){return s.startTime}}};n(function(){if(i&&i.isVideoPage()&&n(".playerContainer a.playButton").length){var r=u.isEmbed?ch9.functions.Resources.getResourceFile(ch9.functions.helpers.getBrowserLocale()):n.Deferred().resolve().promise();r.always(function(){t.playerPresenter=new s;t.playerPresenter.refresh();t.playerPresenter.checkToStartPlayer()})}})})(jQuery);
(function(){"use strict";var t=ch9.functions,i=t.helpers,n=i.debug;t.VideoPlayerConstructor=function(t,i){this.type=t;this.target=i;var r,u=function(){clearTimeout(r)};return{target:this.target,play:function(){this.targetPlay&&typeof this.targetPlay=="function"&&this.targetPlay()},pause:function(){this.targetPause&&typeof this.targetPause=="function"&&this.targetPause()},stop:function(){this.targetStop&&typeof this.targetStop=="function"&&this.targetStop()},getPosition:function(){try{return this.targetGetPosition&&typeof this.targetGetPosition=="function"?this.targetGetPosition():0}catch(t){return n&&console.log("error getting video position: "+t),0}},getDuration:function(){try{return this.targetGetDuration&&typeof this.targetGetDuration=="function"?this.targetGetDuration():0}catch(t){return n&&console.log("error getting video duration: "+t),0}},seek:function(t){if(!t||!t.seconds){n&&console.log("seek has no time");return}var i=this,e=10,u=0,f=function(){if(u>e){clearTimeout(r);return}u++;try{i.targetCanSeek&&typeof i.targetCanSeek=="function"&&i.targetCanSeek(t.seconds)?(n&&console.log("video ready, setting SeekToPosition or currentTime: "+t.seconds),i.targetSeek&&typeof i.targetSeek=="function"&&i.targetSeek(t.seconds),t.paused&&i.targetPause&&typeof i.targetPause=="function"&&i.targetPause()):(r=setTimeout(f,1e3),n&&console.log("video not ready, trying again"))}catch(o){n&&console.log("error occurred while seeking: "+o)}};f()},isPaused:function(){return this.targetIsPaused&&typeof this.targetIsPaused=="function"?this.targetIsPaused():!1},isReady:function(){return this.targetIsReady&&typeof this.targetIsReady=="function"?this.targetIsReady():!1},remove:function(){u();this.targetRemove&&typeof this.targetRemove=="function"&&this.targetRemove()}}};window.addEventListener("message",function(n){if(n.data&&n.data.method&&t.VideoPlayer)switch(n.data.method){case"play":t.VideoPlayer.play();break;case"pause":t.VideoPlayer.pause()}},!1)})();
(function(n){"use strict";var t=ch9.functions,u=t.helpers,i=t.Resources,r=u&&u.debug,s={autoplay:!0,controls:!1,useCh9CustomPlayer:!0},f={Mp4Med:"mp4",Mp4High:"mp4",Mp4:"mp4",WebM:"webm"},e={AudioDescription:"mp4"},h={Mp4Med:{order:0},WebM:{order:1},Mp4High:{order:2},Mp4:{order:3}},o={Mp4:"Low",Mp4Med:"Medium",Mp4High:"High",WebM:"Medium"};t.Html5PresenterConstructor=function(c,l,a){var v=this,p=t.playerPresenter,y;return this.player=n.extend({},s,c),this.episode=l,this.user=a,this.videos=n("ul.html5 a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),this.audioDescriptions=n("ul.audioDescription a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),t.userAgent&&(t.userAgent.isIOS()&&(this.player.controls=!0),t.userAgent.isIE10()&&this.player.isEmbed&&(this.player.useCh9CustomPlayer=!1,this.player.controls=!0)),y=function(n,r,u){var s=[],l,y,v,a,h;if(s.push("<video"),r.id!=null&&s.push(' id="'+r.id+'"'),r["class"]!=null&&s.push(' class="'+r["class"]+'"'),r.poster!=null&&s.push(' poster="'+r.poster+'"'),r.width!=null&&s.push(' width="'+r.width+'"'),r.height!=null&&s.push(' height="'+r.height+'"'),r.controls!=null&&r.controls==!0&&s.push(" controls"),r.preload!=null&&r.preload==!0&&s.push(" preload"),r.autoplay!=null&&r.autoplay==!0&&s.push(" autoplay"),r.loop!=null&&r.loop==!0&&s.push(" loop"),s.push(' onerror="ch9.functions.html5Presenter.fallback(this);"'),s.push(' oncanplay="ch9.functions.html5Presenter.html5Loaded(this);"'),s.push(">"),n&&n.length)for(h=0;h<n.length;h++){var c=n[h],p=typeof f[c.type]!="undefined"?f[c.type]:video.type,w=typeof o[c.type]!="undefined"?o[c.type]:c.type;s.push('<source src="'+c.url+'" type="video/'+p+'" data-quality="'+w+'" onerror="ch9.functions.html5Presenter.fallback(this);" />')}if(u&&u.length)for(h=0;h<u.length;h++)l=u[h],y=typeof e[l.type]!="undefined"?e[l.type]:l.type,s.push('<source src="'+l.url+'" type="video/'+y+'" data-audiodescription="true" onerror="ch9.functions.html5Presenter.fallback(this);" />');if((!r.useCh9CustomPlayer||t.userAgent.isIOS())&&r.tracks&&r.tracks.length)for(v=r.tracks,h=0;h<v.length;h++)a=v[h],s.push('<track label="'+a.label+'" src="'+a.url+'" kind="subtitles" srclang="'+a.language+'"'),a.isdefault&&s.push(" default"),s.push("/>");return ch9.functions.html5Presenter.fallbackHtml=r.fallbackHtml!=null?r.fallbackHtml:'<div class="error"><p><a href="'+n[0].url+'">'+i.getString("JsVideoPlayerClickToStart")+"<\/a><\/p><\/div>",s.join("")},{haveVideo:v.videos.length>0,isPlayPossible:!t.userAgent||t.userAgent.html5playerSupported(),fallbackHtml:'<div class="error">'+i.getString("JsVideoPlayerError")+"<\/div>",getErrorMessage:function(){var n="",t="<h3>HTML5<\/h3>";return this.isPlayPossible&&!this.haveVideo?n+=t+"<p>"+i.getString("JsVideoPlayerHTML5NoVideo")+"<\/p>":!this.isPlayPossible&&this.haveVideo&&(n+=t+"<p>"+i.getString("JsVideoPlayerHTML5NotSupported")+"<\/p>"),n},create:function(t){var i=n.grep(v.videos,function(n){return f[n.type]}),e,r;return(i=i.sort(u.sortVideosBy(h)),!i||i.length==0)?t:(e={"class":"Player",poster:v.episode.images.playerPreview,dofallback:!0,fallbackHtml:t},r={},n.extend(r,v.player,e),v.episode.captions&&v.episode.captions.length>0&&(r.tracks=v.episode.captions),y(i,r,v.audioDescriptions))},setPlayer:function(i){var u,o,f,e;t.VideoPlayer=new t.VideoPlayerConstructor("html5",i);u=t.VideoPlayer;o={targetPlay:function(){this.target&&this.target.play()},targetPause:function(){this.target&&this.target.pause()},targetStop:function(){this.target&&this.target.stop()},targetGetPosition:function(){return this.target?this.target.currentTime:null},targetGetDuration:function(){return this.target?this.target.duration:null},targetIsPaused:function(){return this.target?this.target.paused:!1},targetIsReady:function(){return this.target?this.target.readyState>=3:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&(this.target.play(),this.target.currentTime=n)},targetRemove:function(){this.target&&(this.target.pause(),this.target.src="",this.target.ontimeupdate=null,this.target.onpause=null,this.target.onerror=null)}};n.extend(u,o);try{v.player.useCh9CustomPlayer&&t.Channel9Html5PlayerConstructor&&(u.target.controls=!1,t.Channel9Html5Player=new t.Channel9Html5PlayerConstructor(v.player,v.episode,v.user),u=n.extend(u,t.Channel9Html5Player));f=p.getStartTime();f.seconds>0&&(r&&console.log("seeking to start time: "+f.seconds),u.seek(f));n(u.target).on("timeupdate",function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(v.episode,v.user):n(u.target).off("timeupdate")});n(u.target).on("pause",function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(v.episode,v.user):n(u.target).off("pause")})}catch(s){r&&console.log("error attaching events to html5 player: "+s)}t.Spinner&&t.Spinner.hide();e=document.createEvent("Event");e.initEvent("playerLoaded",!0,!0);document.dispatchEvent(e)},fallback:function(i){if(i){if(n(i).is("source")&&(i=n(i).parent("video").get(0)),i.hasChildNodes())while(i.hasChildNodes())if(i.firstChild){var u=n(i.firstChild);u.is("source")&&u.remove()}if(i.networkState&&i.networkState==i.NETWORK_NO_SOURCE){try{n(i).parent().append(t.html5Presenter.fallbackHtml);n(i).remove()}catch(f){r&&console.log("Error showing fallback: "+JSON.stringify(f))}t.Spinner&&t.Spinner.hide()}}},html5Loaded:function(n){if(n&&(!t||!t.VideoPlayer))try{t.html5Presenter.setPlayer(n)}catch(i){r&&console.log("error loading html5 player: "+i);n.controls=!0;t.Spinner&&t.Spinner.hide()}}}}})(jQuery);
(function(n){"use strict";var i=ch9.functions,u=i.helpers,t=i.Resources,r=i.helpers.debug;i.Channel9Html5PlayerConstructor=function(f,e,o){var s=this,h=i.helpers.Key,st={High:{order:0},Medium:{order:1},Low:{order:2}};if(this.player=f,this.episode=e,this.user=o,this.pagePromises=[],this.videoPlayer=i.VideoPlayer,this.videoElement=this.videoPlayer.target,this.videoContainer=n(".videoContainer",this.player.container),this.episode.length=this.videoElement.duration,this.tracks=this.episode.captions,this.hasQueue=!1,this.showCaptions=!1,this.captionsClosedByScript=!1,this.showAudioDescription=!1,this.markers=null,this.language=s.player.language,this.tracks.length){var ht=n.grep(this.tracks,function(n){return n.isdefault==!0})[0],ui=n.grep(this.tracks,function(n){return n.language==s.player.language})[0],ct=this.tracks[0];typeof ht!="undefined"?(this.showCaptions=!0,this.language=ht.language):typeof ui=="undefined"&&typeof ct!="undefined"&&(this.language=ct.language)}this.permalink=window.location.href.indexOf("/player")>-1?window.location.href.split("/player")[0]:"http://channel9.msdn.com/";this.source=n("video source[src='"+this.videoElement.currentSrc.replace("'","%27")+"']",this.videoContainer);this.qualities=n("video source:not([type='video/webm'])",this.videoContainer).filter("[data-quality]").map(function(){return{label:n(this).data("quality"),src:n(this).attr("src")}}).get().sort(function(n,t){try{return(n=n.label,t=t.label,n===t)?0:st[n].order<st[t].order?-1:1}catch(i){return 1}});this.quality=this.source.data("quality");this.audioDescriptions=n("video source:not([type='video/webm'])",this.videoContainer).filter("[data-audiodescription]");this.speeds=[{label:".5",value:.5,labelClass:"pointFive",labelText:t.getString("JsVideoPlayerSpeedPointFive")},{label:".75",value:.75,labelClass:"pointSevenFive",labelText:t.getString("JsVideoPlayerSpeedPointSevenFive")},{label:"Normal",value:1,labelClass:"normal",labelText:t.getString("JsVideoPlayerSpeedNormal")},{label:"1.25",value:1.25,labelClass:"oneTwoFive",labelText:t.getString("JsVideoPlayerSpeedOneTwoFive")},{label:"1.5",value:1.5,labelClass:"oneFive",labelText:t.getString("JsVideoPlayerSpeedOneFive")},{label:"1.75",value:1.75,labelClass:"oneSevenFive",labelText:t.getString("JsVideoPlayerSpeedOneSevenFive")},{label:"2",value:2,labelClass:"two",labelText:t.getString("JsVideoPlayerSpeedTwo")}];this.speed=this.videoElement.playbackRate;this.controlsTimer=null;this.volumeTimer=null;this.detailsTimer=null;this.addedEndOfVideo=!1;this.currentTime=0;this.ariaTime=0;var tt=function(n,t){var i=t||!1;h.isKey(n,[h.mouseClick,h.space,h.k])&&(Math.floor(s.videoElement.currentTime)>=s.episode.length?s.videoElement.currentTime=0:s.videoElement.paused?(i&&fi(),s.videoPlayer.play()):(i&&ei(),s.videoPlayer.pause()),n.preventDefault(),n.stopPropagation())},fi=function(){var t=n(".ch9p .animations",s.videoContainer);t.addClass("play").fadeIn("fast").fadeOut("slow",function(){n(this).removeClass("play")})},ei=function(){var t=n(".ch9p .animations",s.videoContainer);t.addClass("pause").fadeIn("fast").fadeOut("slow",function(){n(this).removeClass("pause")})},oi=function(){var t=n(".controls .seek.control",s.videoContainer);t.data("dragging",!0)},si=function(t){var i=n(".controls .seek.control",s.videoContainer);i.data("dragging")==!0&&lt(t)},hi=function(){var t=n(".controls .seek.control",s.videoContainer);t.data("dragging")==!0&&t.data("dragging",!1)},lt=function(n){var t=s.videoElement.currentTime,i,r;h.isKey(n,h.mouseClick)&&(i=n.pageX-tu(),r=i/ot(),t=s.episode.length*r,c(t),n.preventDefault(),n.stopPropagation())},fu=function(){var n=i.helpers.getTimePieces(s.videoElement.currentTime),r=i.helpers.getTimePieces(s.episode.length);return String.format(t.getString("JsVideoPlayerSeekValueNow"),n,r)},at=function(){var n=i.helpers.formatTimeMinutesSeconds(s.videoElement.currentTime),r=i.helpers.formatTimeMinutesSeconds(s.episode.length);return String.format(t.getString("JsVideoPlayerSeekValueNow"),n,r)},c=function(n){var t=Math.max(1,Math.min(s.episode.length,n)),i;try{i=s.videoElement.paused;s.videoElement.currentTime=t;i?s.videoPlayer.pause():s.videoPlayer.play()}catch(u){r&&console.log("error setting new position: "+t)}},ci=function(){var t=n(".controlsContainer",s.videoContainer);t.addClass("seeking")},li=function(){var t=n(".controlsContainer",s.videoContainer);t.removeClass("seeking")},ai=function(){var t,i;ii();t=n(".captionRegion",s.videoContainer);s.showCaptions&&s.markers&&s.markers.length?(i=n.grep(s.markers,function(n){return n.begin<=s.videoElement.currentTime&&n.end>=s.videoElement.currentTime})[0],i&&(t.is(":hidden")&&t.show(),n(".captions",t).html(i.content))):t.hide()},vi=function(n){if(h.isKey(n,h.mouseClick)){var t=s.videoElement.paused,i=s.videoElement.currentTime-30;s.videoPlayer.seek({seconds:Math.max(Math.min(s.episode.length,i),1)});t&&s.videoPlayer.pause();n.preventDefault();n.stopPropagation()}},yi=function(t){n(t.currentTarget).addClass("override").text("-30s")},pi=function(t){n(t.currentTarget).removeClass("override").text(i.helpers.getTimePieces(Math.floor(s.videoElement.currentTime)))},wi=function(t){h.isKey(t,h.tab)&&h.shiftKeyModifier(t)&&(t.preventDefault(),k(),n("#volumeSlider").focus())},bi=function(n){if(h.isKey(n,h.mouseClick)){var t=s.videoElement.paused,i=s.videoElement.currentTime+30;s.videoPlayer.seek({seconds:Math.max(Math.min(s.episode.length,i),1)});t&&s.videoPlayer.pause();n.preventDefault();n.stopPropagation()}},ki=function(t){n(t.currentTarget).addClass("override").text("+30s")},di=function(t){n(t.currentTarget).removeClass("override").text(i.helpers.getTimePieces(Math.floor(s.episode.length-Math.min(s.episode.length,s.videoElement.currentTime))))},gi=function(t){var u=s.videoElement.volume,i=n(".controls .volume.control"),r=n(".details",i);h.isKey(t,h.mouseClick)&&(r.hasClass("active")&&(s.videoElement.muted=!s.videoElement.muted),t.preventDefault(),t.stopPropagation())},nr=function(t){h.isKey(t,[h.m,h.space,h.enter])&&(s.videoElement.muted=!s.videoElement.muted);h.isKey(t,h.tab)&&!h.shiftKeyModifier(t)&&(t.preventDefault(),k(),n("#volumeSlider").focus())},tr=function(n){h.isKey(n,h.upArrow)&&(n.preventDefault(),y(s.videoElement.volume+.05));h.isKey(n,h.downArrow)&&(n.preventDefault(),y(s.videoElement.volume-.05))},k=function(){var t=n(".controls .volume.control",s.videoContainer),i=n(".details",t);i.fadeIn("fast",function(){n(this).addClass("active")})},vt=function(){var i=n(".controls .volume.control",s.videoContainer),t=n(".details",i);t.is(":hidden")||t.fadeOut("fast",function(){n(this).removeClass("active")})},ir=function(){var t=n(".controls .volume.control",s.videoContainer);t.data("dragging",!0)},rr=function(t){var i;if(t){if(i=n(".controls .volume.control",s.videoContainer),i.data("dragging")==!0){var r=n(".volumeSlider",i),u=n(".handle",r),f=u.offset().top-r.offset().top,e=(100-f)/100;y(e)}t.preventDefault();t.stopPropagation()}},ur=function(){var t=n(".controls .volume.control",s.videoContainer);t.data("dragging")==!0&&t.data("dragging",!1)},fr=function(n){if(h.isKey(n,h.mouseClick)){var t=n.pageY-er(),i=(100-t)/100;y(i);n.preventDefault();n.stopPropagation()}},y=function(n){k();var t=Math.max(0,Math.min(1,n));s.videoElement.volume=t},er=function(){var t=n(".controls .volume.control .volumeSlider",s.videoContainer);return t.offset().top},or=function(){var i=n(".controls .volume.control",s.videoContainer),e=n(".button",i),r=n(".volumeSlider",i),o=n(".handle",r),u=r.height()-o.height(),f=Math.floor(u-u*s.videoElement.volume);f=Math.max(Math.min(f,u),0);o.css({top:f+"px"});s.videoElement.muted?(i.addClass("muted"),e.attr({title:t.getString("JsVideoPlayerVolumeUnmute"),"aria-label":t.getString("JsVideoPlayerVolumeUnmuteScreenreader"),"aria-pressed":"true"}).text(t.getString("JsVideoPlayerVolumeUnmute")),r.attr({"aria-valuenow":"0","aria-valuetext":"0%"})):(i.removeClass("muted"),e.attr({title:t.getString("JsVideoPlayerVolumeMute"),"aria-label":t.getString("JsVideoPlayerVolumeMuteScreenreader"),"aria-pressed":"false"}).text(t.getString("JsVideoPlayerVolumeMute")),r.attr({"aria-valuenow":d(),"aria-valuetext":String.format(t.getString("JsVideoPlayerVolumeStatusScreenreader"),d())}))},d=function(){return Math.round(s.videoElement.volume*100)},yt=function(t){if(h.isKey(t,h.mouseClick)){var i=n(t.currentTarget).next(".details");n(i).is(":hidden")?(l(t),sr(n(i))):pt(n(i));t.preventDefault();t.stopPropagation()}h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).focus())},sr=function(t){t&&(t.fadeIn("fast"),t.prev(".button").attr("aria-expanded","true").attr("aria-label",t.data("expandedLabel")).addClass("active"),n(".ch9p .controlsContainer").addClass("details"))},pt=function(t){t&&(t.fadeOut("fast"),t.prev(".button").attr("aria-expanded","false").attr("aria-label",t.data("collapsedLabel")).removeClass("active"),n(".ch9p .controlsContainer").removeClass("details"))},l=function(){n(".ch9p .controlsContainer .details").each(function(t,i){pt(n(i))})},a=function(n){n.attr({"aria-checked":!0,tabindex:"0"}).siblings("div[role=radio]").attr({"aria-checked":!1,tabindex:"-1"})},v=function(n,t){h.isKey(n,[h.leftArrow,h.upArrow])&&(t.prev("div[role=radio]").focus(),n.stopPropagation(),n.preventDefault());h.isKey(n,[h.rightArrow,h.downArrow])&&(t.next("div[role=radio]").focus(),n.stopPropagation(),n.preventDefault())},hr=function(t){var i=n(t.currentTarget);v(t,i);h.isKey(t,[h.mouseClick,h.enter,h.space])&&(a(i),s.showCaptions=!0,p(),t.stopPropagation(),t.preventDefault());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus())},cr=function(t){var i=n(t.currentTarget);v(t,i);h.isKey(t,[h.mouseClick,h.enter,h.space])&&(a(i),s.showCaptions=!1,p(),t.stopPropagation(),t.preventDefault());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus())},lr=function(t){var r=n(t.currentTarget),i;if(v(t,r),h.isKey(t,[h.mouseClick,h.enter,h.space])){var u=n(".controls .closedCaptions.control",s.videoContainer),f=n(".button",u),e=n(".details .optionsListHolder",u);a(r);i=r.data("value");i&&i!=s.language&&(s.showCaptions=!0,s.language=i,p());t.stopPropagation();t.preventDefault()}h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus())},ar=function(t){var i=n(t.currentTarget);v(t,i);h.isKey(t,[h.mouseClick,h.enter,h.space])&&(a(i),s.showAudioDescription=!0,p(),t.stopPropagation(),t.preventDefault());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus());h.isKey(t,[h.mouseClick,h.enter,h.space])&&(n(this).siblings('[role="radio"]').data("src",s.source.attr("src")),it(this,i))},vr=function(t){var i=n(t.currentTarget);v(t,i);h.isKey(t,[h.mouseClick,h.enter,h.space])&&(a(i),s.showAudioDescription=!1,p(),t.stopPropagation(),t.preventDefault());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus());h.isKey(t,[h.mouseClick,h.enter,h.space])&&it(this,i)},p=function(){var f=n(".controls .closedCaptions.control",s.videoContainer),o=n("#ccOn",f),h=n(".details .optionsListHolder .optionsList",f),e,t,u;if(s.showCaptions&&s.language){if(e=n("label."+s.language,h),t=n.grep(s.tracks,function(n){return n.language==s.language})[0],!t||!t.url)return;u=i.Services.Channel9DataSource({source:t.url});s.pagePromises.push(u);n.when(u).then(function(n){if(n&&n.length){a(o);var t=new i.WebVTTMarkerParser;s.markers=t.parseMarkerCollection(n[0])}},function(n){r&&console.log("error getting caption file: "+JSON.stringify(n))});e.addClass("selected").siblings("label").removeClass("selected")}},it=function(t,i){var r=n(t).data("src");if(r!=s.source.attr("src")){var e=n(t).data("quality"),o=n(".controls .settings.control .quality",s.videoContainer),u=s.videoElement.currentTime,f=s.videoElement.paused;if(a(i),s.source.attr("src",r),s.videoElement.load(),s.videoPlayer.seek({seconds:u}),f){s.videoPlayer.pause();try{s.videoPlayer.target&&s.videoPlayer.target.addEventListener("canplaythrough",function(){s.videoPlayer.pause()})}catch(h){}}}},yr=function(t){var i=n(t.currentTarget);v(t,i);h.isKey(t,[h.mouseClick,h.enter,h.space])&&(it(this,i),t.stopPropagation(),t.preventDefault());h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus())},pr=function(t){var r=n(t.currentTarget),f,u;if(v(t,r),h.isKey(t,[h.mouseClick,h.enter,h.space])){var i=n(this).data("value"),e=n(this).data("speed"),o=n(this).data("labelClass");i!=s.videoElement.playbackRate&&(f=n(".controls .settings.control .speed",s.videoContainer),u=s.videoElement.paused,a(r),s.videoElement.playbackRate=i,s.speed=i,u&&s.videoPlayer.pause());t.stopPropagation();t.preventDefault()}h.isKey(t,h.escape)&&(l(t),n(t.currentTarget).parents(".details").prev(".button").focus())},g=function(t){if(h.isKey(t,h.mouseClick)){var r=i.helpers.addQueryStringParam(n(this).attr("href"),"ocid=player");s.player.isEmbed?window.open(r):window.location.href=r;t.preventDefault();t.stopPropagation()}},eu=function(t){h.isKey(t,h.mouseClick)&&(window.open(n(this).attr("href")),t.preventDefault(),t.stopPropagation())},b=function(){var n=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return n!=null||s.videoContainer.hasClass("fullscreen")},wr=function(){var n=s.videoContainer.get(0);return n.requestFullscreen&&typeof n.requestFullscreen=="function"||n.msRequestFullscreen&&typeof n.msRequestFullscreen=="function"||n.mozRequestFullScreen&&typeof n.mozRequestFullScreen=="function"||n.webkitRequestFullscreen&&typeof n.webkitRequestFullscreen=="function"||s.videoElement.webkitEnterFullscreen&&typeof s.videoElement.webkitEnterFullscreen=="function"?!0:!1},wt=function(t){if(h.isKey(t,[h.mouseClick,h.f,h.escape])){if(b())document.exitFullscreen&&typeof document.exitFullscreen=="function"?document.exitFullscreen():document.msExitFullscreen&&typeof document.msExitFullscreen=="function"?document.msExitFullscreen():document.mozCancelFullScreen&&typeof document.mozCancelFullScreen=="function"?document.mozCancelFullScreen():document.webkitExitFullscreen&&typeof document.webkitExitFullscreen=="function"?document.webkitExitFullscreen():(s.videoContainer.removeClass("fullscreen"),w());else{var i=s.videoContainer.get(0);i.requestFullscreen&&typeof i.requestFullscreen=="function"?i.requestFullscreen():i.msRequestFullscreen&&typeof i.msRequestFullscreen=="function"?i.msRequestFullscreen():i.mozRequestFullScreen&&typeof i.mozRequestFullScreen=="function"?i.mozRequestFullScreen():i.webkitRequestFullscreen&&typeof i.webkitRequestFullscreen=="function"?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):s.videoElement.webkitEnterFullscreen&&typeof s.videoElement.webkitEnterFullscreen=="function"?s.videoElement.webkitEnterFullscreen():(s.videoContainer.addClass("fullscreen"),w())}t.preventDefault();t.stopPropagation();n(".ch9p",s.videoContainer).focus()}},w=function(){var i=n(".controls .fullscreen",s.videoContainer),r=n(".button",i);b()?(i.addClass("restore"),r.attr({title:t.getString("JsVideoPlayerFullscreenRestore"),"aria-label":t.getString("JsVideoPlayerFullscreenRestoreScreenreader"),"aria-pressed":"true"}).text(t.getString("JsVideoPlayerFullscreenRestore"))):(i.removeClass("restore"),r.attr({title:t.getString("JsVideoPlayerFullscreen"),"aria-label":t.getString("JsVideoPlayerFullscreenScreenreader"),"aria-pressed":"false"}).text(t.getString("JsVideoPlayerFullscreen")));et()},rt=!1,bt,br=[h.tab,h.enter],kt=function(t){h.isKey(t,br)&&(n(".ch9p",s.videoContainer).addClass("keyboard"),rt=!0,clearTimeout(bt),bt=setTimeout(function(){rt=!1},2e3))},dt=function(){rt||n(".ch9p",s.videoContainer).removeClass("keyboard")},kr=function(n){h.isKey(n,h.mouseClick)&&(tt(n,!0),nt(),n.preventDefault(),n.stopPropagation())},ou=function(){gt()},nt=function(){ut();dr()},gt=function(){ni();ti()},ut=function(){ni();s.controlsTimer=setTimeout(ti,2e3)},ni=function(){s.controlsTimer&&clearTimeout(s.controlsTimer)},ti=function(){var t=n(".ch9p .controlsContainer");s.videoElement.paused||t.hasClass("details")||t.hasClass("seeking")||!t.hasClass("active")||n(".ch9p").hasClass("keyboard")||(t.fadeOut("fast",function(){n(this).css({display:"",opacity:0})}),t.removeClass("active"))},dr=function(){var t=n(".ch9p .controlsContainer");t.hasClass("active")||(t.css({display:"none",opacity:""}),t.fadeIn("fast"),t.addClass("active"))},ft=function(t,r){var f="/assets/images/nineguy-512-bw.png";t.append(n("<article>").addClass("abstract xSmall").append(n("<header>").ifThen(r.series&&r.contentType!=i.ContentType.oneoff,function(){this.append(n("<div>").addClass("seriesTitle").append(n("<a>").attr("href",r.series.permalink).text(r.series.title)))}).append(n("<h3>").append(n("<a>").attr("href",r.permalink).text(r.title).on("click keydown",g)))).append(n("<a>").addClass("tile").attr({tabindex:"-1",href:r.permalink}).append(n("<img>").attr({role:"img",src:r.images.large,alt:r.title}).on("error",function(){n(this).attr("src",f)})).ifThen(r.length,function(){var t=u.getTimePieces(r.length);t=t.substring(0,2)=="0:"?t.substring(2,t.length):t;this.append(n("<time>").addClass("caption").attr("datetime",t).text(t))}).on("click keydown",g)))},gr=function(){if(s.player.isEmbed){if(s.player&&!s.player.showEndOfVideo){n(".endOfVideo",s.videoContainer).append(n("<button><\/button>").text(t.getString("JsVideoPlayerReplay")).addClass("replay")).addClass("replayHolder");return}n(".endOfVideo .channel9Link",s.videoContainer).show()}var u=n.when([]),f=n.when([]),e=i.Services.Episodes.getFeaturedData(9);(!s.episode.isMVA||s.episode.relatedApi&&s.episode.relatedApi.trim()!="")&&(f=i.Services.Episodes.getRelatedEpisodes(s.episode.relatedApi,9));!s.player.isEmbed&&s.user.isLoggedIn&&(u=i.Services.Episodes.getQueueData(9));s.pagePromises.push(e);s.pagePromises.push(f);s.pagePromises.push(u);n.when(e,f,u).then(function(i,r,u){var f=9,e;u&&u.length&&(n(".endOfVideo .sections section.queue h2").text(t.getString("JsVideoPlayerWatchQueue")),e=n.grep(u,function(n){return n.contentId.replace(/-/g,"")!=s.episode.contentId}),e.length?(e.slice(0,4).forEach(function(t){ft(n(".endOfVideo .sections section.queue .abstracts",s.videoContainer),t)}),s.hasQueue=!0,n(".endOfVideo").addClass("hasQueue")):n(".endOfVideo").removeClass("hasQueue"));s.hasQueue&&(f=4);!s.episode.isMVA&&r&&r.length?(n(".endOfVideo .sections section.related h2").text(t.getString("JsVideoPlayerWatchRelated")),n.grep(r,function(n){return n.contentId.replace(/-/g,"")!=s.episode.contentId}).slice(0,f).forEach(function(t){ft(n(".endOfVideo .sections section.related .abstracts",s.videoContainer),t)})):(n(".endOfVideo .sections section.related h2").text(t.getString("JsVideoPlayerWatchFeatured")),n.grep(i,function(n){return n.contentId.replace(/-/g,"")!=s.episode.contentId}).slice(0,f).forEach(function(t){ft(n(".endOfVideo .sections section.related .abstracts",s.videoContainer),t)}))},function(n){r&&console.log("error getting related videos: "+JSON.stringify(n.responseText))})},nu=function(){if(s.currentTime!=s.videoElement.currentTime){s.currentTime=s.videoElement.currentTime;var r=n(".controls .play.control",s.videoContainer),u=n(".button",r),l=n(".controls .skipBack.control",s.videoContainer),e=n(".button",l),a=n(".controls .skipAhead.control",s.videoContainer),o=n(".button",a),f=n(".endOfVideo",s.videoContainer),h=s.currentTime,c=Math.floor(s.episode.length-s.currentTime);!s.addedEndOfVideo&&s.episode.length-s.currentTime<=60&&(s.addedEndOfVideo=!0,gr());s.currentTime>=s.episode.length?r.hasClass("replay")||(r.removeClass("pause").addClass("replay"),u.attr({title:t.getString("JsVideoPlayerReplay"),"aria-label":t.getString("JsVideoPlayerReplayScreenreader")}).text(t.getString("JsVideoPlayerReplay")),h=s.episode.length,c=0,f.show(),s.showCaptions&&(s.showCaptions=!1,s.captionsClosedByScript=!0)):s.videoElement.paused?(r.hasClass("replay")||r.hasClass("pause"))&&(r.removeClass("replay").removeClass("pause"),u.attr({title:t.getString("JsVideoPlayerPlay"),"aria-label":t.getString("JsVideoPlayerPlayScreenreader")}).text(t.getString("JsVideoPlayerPlay")),f.hide(),s.captionsClosedByScript&&(s.showCaptions=!0,s.captionsClosedByScript=!1)):r.hasClass("pause")||(r.removeClass("replay").addClass("pause"),u.attr({title:t.getString("JsVideoPlayerPause"),"aria-label":t.getString("JsVideoPlayerPauseScreenreader")}).text(t.getString("JsVideoPlayerPause")),f.hide(),s.captionsClosedByScript&&(s.showCaptions=!0,s.captionsClosedByScript=!1));e.hasClass("override")||e.text(i.helpers.getTimePieces(h));o.hasClass("override")||o.text(i.helpers.getTimePieces(c))}},et=function(){var t=n(".controlsContainer",s.videoContainer),o=n(".control.volume",t),f=n(".seek",t),h=n(".handle",f),c=n(".control.channel9Link",t),l=n(".control.fullscreen",t),e=n(".control.closedCaptions",t),v=n(".details",e),a=n(".control.settings",t),y=n(".details",a),p=n(".control.spacer",t),r,u;i.userAgent&&i.userAgent.isIOS()&&o.remove();s.player.isEmbed&&!wr()&&l.remove();s.tracks.length||(e.remove(),s.showCaptions=!1);r=!1;try{document.location&&document.location.ancestorOrigins&&document.location.ancestorOrigins[0]?r=document.location.ancestorOrigins[0].endsWith("microsoft.com"):document.referrer&&(r=document.referrer.includes("microsoft.com/"))}catch(w){r=!1}(!s.player.isEmbed||r)&&c.remove();u=ot();i.userAgent&&i.userAgent.isIE9()&&f.css({width:u});h.css({borderLeftWidth:u+"px",marginLeft:"-"+u+"px"});ii()},ii=function(){var t=n(".controlsContainer .seek",s.videoContainer),u=n(".handle",t),f=s.videoElement.currentTime/s.episode.length,r=ot()-10,e=Math.floor(r*f);u.css({left:Math.max(Math.min(e,r),0)+"px"});Math.round(s.videoElement.currentTime)!=Math.round(s.ariaTime)&&(t.attr({"aria-valuenow":i.helpers.formatTimeMinutesSeconds(Math.round(s.videoElement.currentTime)),"aria-valuetext":at()}),s.ariaTime=s.videoElement.currentTime)},ot=function(){var t=n(".controlsContainer .seek",s.videoContainer);return b()||i.userAgent&&i.userAgent.isIE9()?iu():t.outerWidth(!0)},tu=function(){var i=n(".controlsContainer .seek",s.videoContainer),t=i.offset().left;return b()&&(t=0),t},iu=function(){var t=screen.width,i=n(window).width(),r=s.videoContainer.width();return b()?Math.max(t,i):r},ru=function(n){var t,i,r;h.ctrlKeyModifier(n)||(h.isKey(n,[h.space,h.k])&&(n.preventDefault(),tt(n,!0)),h.isKey(n,[h.num0,h.home])&&c(1),h.isKey(n,h.end)&&c(s.episode.length),h.isKey(n,h.comma)&&c(s.videoElement.currentTime-1),h.isKey(n,h.leftArrow)&&c(s.videoElement.currentTime-5),h.isKey(n,h.j)&&c(s.videoElement.currentTime-10),h.isKey(n,h.period)&&c(s.videoElement.currentTime+1),h.isKey(n,h.rightArrow)&&c(s.videoElement.currentTime+5),h.isKey(n,h.l)&&c(s.videoElement.currentTime+10),h.isKey(n,h.f)&&wt(n),h.isNumeric(n)&&(t=n.which||n.keyCode||0,i=0,t>=h.num0&&t<=h.num9?i=h.num0:t>=h.numPad0&&t<=h.numPad9&&(i=h.numPad0),i>0&&(r=s.episode.length*((t-i)/10),c(r))),h.isKey(n,h.m)&&(s.videoElement.muted=!s.videoElement.muted),h.isKey(n,h.upArrow)&&(n.preventDefault(),y(s.videoElement.volume+.05)),h.isKey(n,h.downArrow)&&(n.preventDefault(),y(s.videoElement.volume-.05)))},uu=function(){n(".ch9p",s.videoContainer).empty().remove();n(s.videoContainer).append(n("<div>").addClass("ch9p").append(n("<div>").addClass("stage").append(n("<div>").addClass("animations").hide().append(n("<div>").addClass("animation"))).append(n("<section>").addClass("endOfVideo").attr("role","complementary").hide().append(n("<a>").addClass("channel9Link").attr({href:"http://channel9.msdn.com/"}).text(t.getString("JsVideoPlayerWatchChannel9")).on("click keydown",g).hide()).append(n("<div>").addClass("sections").append(n("<section>").addClass("related").append(n("<header>").append(n("<h2>"))).append(n("<div>").addClass("abstracts"))).append(n("<section>").addClass("queue").append(n("<header>").append(n("<h2>"))).append(n("<div>").addClass("abstracts"))))).append(n("<div>").addClass("captionRegion").hide().append(n("<div>").addClass("captions").attr({"aria-label":t.getString("JsVideoPlayerClosedCaptions"),"aria-live":"polite"})))).append(n('<div role="group" title="'+t.getString("JsVideoPlayer")+'">').addClass("controlsContainer active").append(n("<div>").addClass("seek").attr({role:"slider",tabindex:"0",title:t.getString("JsVideoPlayerSeek"),"aria-label":t.getString("JsVideoPlayerSeekScreenreader"),"aria-live":"polite","aria-valuemin":i.helpers.formatTimeMinutesSeconds(0),"aria-valuemax":i.helpers.formatTimeMinutesSeconds(Math.round(s.episode.length)),"aria-valuenow":i.helpers.formatTimeMinutesSeconds(Math.round(s.videoElement.currentTime)),"aria-valuetext":at(),draggable:"true"}).on("focus",ci).on("blur",li).on("click keydown",lt).append(n("<div>").addClass("handle").draggable({axis:"x",containment:"parent",start:oi,drag:si,stop:hi}))).append(n("<div>").addClass("controls").append(n("<div>").addClass("controlSet").append(n("<div>").addClass("play control").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerPlay"),"aria-label":t.getString("JsVideoPlayerPlayScreenreader")}).text(t.getString("JsVideoPlayerPlay")).on("click keydown",tt))).append(n("<div>").addClass("volume control").on("mouseenter",k).on("mouseleave",vt).append(n("<button>").addClass("button").attr({title:s.videoElement.muted?t.getString("JsVideoPlayerVolumeUnmute"):t.getString("JsVideoPlayerVolumeMute"),type:"button","aria-haspopup":"false","aria-label":s.videoElement.muted?t.getString("JsVideoPlayerVolumeUnmuteScreenreader"):t.getString("JsVideoPlayerVolumeMuteScreenreader"),"aria-pressed":s.videoElement.muted}).text(s.videoElement.muted?t.getString("JsVideoPlayerVolumeUnmute"):t.getString("JsVideoPlayerVolumeMute")).on("click",gi).on("keydown",nr)).append(n("<div>").addClass("details").hide().append(n("<label>").attr("for","volumeSlider").attr("id","volumeSliderLabel").addClass("screenReader").text(t.getString("JsVideoPlayerVolumeScreenreader"))).append(n("<p>").attr("id","volumeText").addClass("screenReader").text(t.getString("JsVideoPlayerVolumeTextScreenreader"))).append(n("<div>").addClass("volumeSlider").attr({id:"volumeSlider",tabindex:"0",role:"slider","aria-labelledby":"volumeSliderLabel","aria-describedby":"volumeText","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":d(),"aria-valuetext":String.format(t.getString("JsVideoPlayerVolumeStatusScreenreader"),d())}).on("blur",vt).on("click",fr).on("keydown",tr).append(n("<div>").addClass("handle").draggable({axis:"y",containment:"parent",start:ir,drag:rr,stop:ur}))))).append(n("<div>").addClass("skipBack control label").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerSkipBack"),type:"button","aria-label":t.getString("JsVideoPlayerSkipBackScreenreader")}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",yi).on("blur mouseleave",pi).on("click keydown",vi).on("keydown",wi))).append(n("<div>").addClass("skipDivider control label").append(n("<span>").text("/"))).append(n("<div>").addClass("skipAhead control label").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerSkipAhead"),type:"button","aria-label":t.getString("JsVideoPlayerSkipAheadScreenreader")}).text(i.helpers.getTimePieces(0)).on("focus mouseenter",ki).on("blur mouseleave",di).on("click keydown",bi)))).append(n("<div>").addClass("controlSet").append(n("<div>").addClass("closedCaptions control").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerClosedCaptions"),type:"button","aria-label":t.getString("JsVideoPlayerClosedCaptionsShowScreenreader"),"aria-haspopup":"true","aria-expanded":"false"}).text(t.getString("JsVideoPlayerClosedCaptions")).on("click keydown",yt)).append(n("<div>").data("expandedLabel",t.getString("JsVideoPlayerClosedCaptionsHideScreenreader")).data("collapsedLabel",t.getString("JsVideoPlayerClosedCaptionsShowScreenreader")).addClass("details").hide().ifThen(s.tracks.length,function(){this.append(n("<fieldset>").addClass("cc").append(n("<legend>").text(t.getString("JsVideoPlayerClosedCaptions"))).append(n("<div>").attr({role:"radiogroup","aria-labelledby":"ccOnOff"}).append(n("<strong>").addClass("screenReader").attr("id","ccOnOff").text(t.getString("JsVideoPlayerClosedCaptionsOnOff"))).append(n("<div>").attr({id:"ccOff",role:"radio","aria-checked":!s.showCaptions,tabindex:s.showCaptions?"-1":"0"}).text(t.getString("JsVideoPlayerClosedCaptionsOffShort")).on("click keydown",cr)).append(n("<div>").attr({id:"ccOn",role:"radio","aria-checked":s.showCaptions,tabindex:s.showCaptions?"0":"-1"}).text(t.getString("JsVideoPlayerClosedCaptionsOnShort")).on("click keydown",hr))).append(n("<div>").addClass("optionsListHolder").append(n("<div>").addClass("optionsList").attr({role:"radiogroup","aria-labelledby":"ccOptions"}).append(n("<strong>").addClass("screenReader").attr("id","ccOptions").text(t.getString("JsVideoPlayerClosedCaptionsLanguages"))).ifThen(s.tracks.length,function(){for(var t,r,i=0;i<s.tracks.length;i++)t=s.tracks[i],r=t.language==s.language,n(this).append(n("<div>").attr({role:"radio","aria-checked":r,tabindex:r?"0":"-1",lang:t.language}).data("value",t.language).text(t.label).on("click keydown",lr))}))))}))).append(n("<div>").addClass("settings control").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerSettings"),type:"button","aria-haspopup":"true","aria-expanded":"false","aria-label":t.getString("JsVideoPlayerSettingsShowScreenreader")}).text(t.getString("JsVideoPlayerSettings")).on("click keydown",yt)).append(n("<div>").data("expandedLabel",t.getString("JsVideoPlayerSettingsHideScreenreader")).data("collapsedLabel",t.getString("JsVideoPlayerSettingsShowScreenreader")).addClass("details").hide().ifThen(s.audioDescriptions.length,function(){for(var r,i=0;i<s.audioDescriptions.length;i++)r=n(s.audioDescriptions[i]),r.attr("src")&&this.append(n("<fieldset>").addClass("audioDescription").append(n("<legend>").text(t.getString("JsVideoPlayerAudioDescription"))).append(n("<div>").attr({role:"radiogroup","aria-labelledby":"audioDescription"}).append(n("<strong>").addClass("screenReader").attr("id","audioDescription_"+i).text(t.getString("JsVideoPlayerAudioDescriptionOnOff"))).append(n("<div>").attr({id:"adOff_"+i,role:"radio","aria-checked":!s.showCaptions,tabindex:s.showCaptions?"-1":"0"}).text(t.getString("JsVideoPlayerAudioDescriptionOffShort")).on("click keydown",vr)).append(n("<div>").attr({id:"adOn_"+i,role:"radio","aria-checked":s.showCaptions,tabindex:s.showCaptions?"0":"-1"}).text(t.getString("JsVideoPlayerAudioDescriptionOnShort")).data("src",r.attr("src")).on("click keydown",ar))))}).append(n("<fieldset>").addClass("quality").attr({role:"radiogroup","aria-labelledby":"videoQuality"}).append(n("<legend>").attr("id","videoQuality").text(t.getString("JsVideoPlayerQuality"))).ifThen(s.qualities.length,function(){for(var i,r=0;r<s.qualities.length;r++)i=s.qualities[r],this.append(n("<div>").attr({role:"radio","aria-checked":s.quality==i.label,tabindex:s.quality==i.label?"0":"-1"}).data("quality",i.label).data("src",i.src).text(t.getString("JsVideoPlayerQuality"+i.label)).on("click keydown",yr))})).append(n("<fieldset>").addClass("speed").attr({role:"radiogroup","aria-labelledby":"videoSpeed"}).append(n("<legend>").attr("id","videoSpeed").text(t.getString("JsVideoPlayerSpeed"))).ifThen(s.speeds.length,function(){for(var t,i=0;i<s.speeds.length;i++)t=s.speeds[i],this.append(n("<div>").attr({role:"radio","aria-checked":s.speed==t.value,tabindex:s.speed==t.value?"0":"-1"}).data("speed",t.label).data("value",t.value).data("labelClass",t.labelClass).text(t.label).on("click keydown",pr))})))).append(n("<div>").addClass("channel9Link control").append(n("<a>").addClass("button").attr({href:s.permalink,title:t.getString("JsVideoPlayerWatchChannel9")}).text(t.getString("JsVideoPlayerWatchChannel9")).on("click keydown",g))).append(n("<div>").addClass("fullscreen control").append(n("<button>").addClass("button").attr({title:t.getString("JsVideoPlayerFullscreen"),type:"button","aria-label":t.getString("JsVideoPlayerFullscreenScreenreader")}).text(t.getString("JsVideoPlayerFullscreen")).on("click keydown",wt)))))))};try{n(s.videoElement).on("volumechange",or);n(s.videoElement).on("play pause timeupdate",nu);n(s.videoElement).on("timeupdate",ai)}catch(ri){r&&console.log("error attaching events to html5 video player: "+JSON.stringify(ri))}try{document.addEventListener("fullscreenchange",w);document.addEventListener("webkitfullscreenchange",w);document.addEventListener("mozfullscreenchange",w);document.addEventListener("MSFullscreenChange",w)}catch(ri){r&&console.log("error attaching events to document: "+JSON.stringify(ri))}return n(function(){var t=function(){uu();et();s.language&&s.showCaptions&&(s.showCaptions=!0,p());ut();var t=n(".ch9p",s.videoContainer),i=n(".controls",t);t.on("keydown",function(n){ru(n);nt();n&&n.stopPropagation()});n(".control .button, .seek",i).on("click mouseenter mousemove focus keydown",function(n){nt();n&&n.stopPropagation()});n(".control .button, .seek",i).on("blur mouseleave",function(n){ut();n&&n.stopPropagation()});n(".control .button, .seek",i).on("keyup",kt);t.on("keyup",kt);n(".control .button, .seek",i).on("mousedown",dt);t.on("mouseenter mousemove mousedown",dt);t.on("focus mouseenter mousemove",function(n){nt();n&&n.stopPropagation()});t.on("blur mouseleave",function(n){gt();n&&n.stopPropagation()});n(".stage",t).on("click",function(n){kr(n);n&&n.stopPropagation()});window.onresize=et};t()}),{remove:function(){if(s.videoElement.src="",n(".ch9p",s.videoContainer).empty().remove(),s.pagePromises)for(var t=0;t<s.pagePromises.length;t++)s.pagePromises[t].fail()}}}})(jQuery);
(function(){"use strict";var n=ch9.functions,t=n.helpers,i=t.debug;n.WebVTTMarkerParser=function(){var u=function(){var n=this;return this.cues=[],{getCues:function(){return n.cues},addCue:function(t){n.cues.push(t)}}},i=function(){var n=this;return this.begin=null,this.end=null,this.content="",{getBegin:function(){return n.begin},setBegin:function(t){n.begin=t},getEnd:function(){return n.end},setEnd:function(t){n.end=t},getContent:function(){return n.content},setContent:function(t){n.content=t}}},r=/ \-\-\> /,f=function(f){for(var o,a,k,l,d,c,s,w=new u,v=[],e=new i,y=null,b=f.replace(/\r\n/,"\n").split(/\n/),p=!1,h=0;h<b.length;h++)if(o=b[h],!/^WEBVTT/.test(o)&&!/^WEBVTT FILE/.test(o)&&!/^NOTE/.test(o))if(r.test(o)){e.getContent()!=null&&e.getContent().trim()!=""&&v.push(e);p=!1;e=new i;a=o.split(r);a=$.grep(a,function(n){return n?n.trim()!="":!1});k=a[0];l=a[1].split(" ");l=$.grep(l,function(n){return n?n.trim()!="":!1});d=l[0];l.shift(0);var it=l,g=new n.TimeExpression,nt=g.parse(k||0),tt=g.parse(d||0);e.setBegin(nt);e.setEnd(tt);e.setContent("")}else o&&o.trim()==""?p=!0:p||(c=e.getContent().trim(),c!=""&&(c+="\n"),c+=unescape(o),c=t.widowControl(c).replace(/\n/,"<br>").replace(/\r/,"<br>"),e.setContent(c));for(e.getContent()!=null&&e.getContent().trim()!=""&&v.push(e),h=0;h<v.length;h++)(s=v[h],s.getContent().trim()!="")&&(y!=null&&s.begin<y.begin||s.end<s.begin||(w.addCue({begin:s.getBegin(),end:s.getEnd(),content:s.getContent()}),y=s));return w};return{parseMarkerCollection:function(n){var t=f(n);return t.getCues()}}};n.TimeExpression=function(){var n=/(\d{2}):(\d{2}):(\d{2})\.(\d+)/,t=/(\d{2}):(\d{2})\.(\d+)/;return{parse:function(r){var e,o,s,h=0,f=r.trim(),c=n.test(f),u=n.exec(f);if(!c)if(i&&console.log("Invalid time expression: "+r),t.test(f))u=t.exec(f),u.splice(1,0,"00");else return null;return e=parseFloat(u[1]*36e5),o=parseInt(u[2]*6e4),s=parseInt(u[3]*1e3),u[4]!=""&&(h=parseFloat(u[4])),(e+o+s+h)/1e3}}}})();
window.Silverlight||(window.Silverlight={});Silverlight._silverlightCount=0;Silverlight.__onSilverlightInstalledCalled=!1;Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";Silverlight.__installationEventFired=!1;Silverlight.onGetSilverlight=null;Silverlight.onSilverlightInstalled=function(){window.location.reload(!1)};Silverlight.isInstalled=function(n,t){var i,l,s,h,e,r,u,o,c,f;if(!t)return!1;n==undefined&&(n=null);i=!1;try{s=!1;try{l=new ActiveXObject("AgControl.AgControl");n===null?i=!0:l.IsVersionSupported(n)&&(i=!0)}catch(a){s=!0}if(!s)return i;if(h=navigator.plugins["Silverlight Plug-In"],h)if(n===null)i=!0;else{for(e=h.description,e==="1.0.30226.2"&&(e="2.0.30226.2"),r=e.split(".");r.length>3;)r.pop();while(r.length<4)r.push(0);for(u=n.split(".");u.length>4;)u.pop();f=0;do o=parseInt(u[f]),c=parseInt(r[f]),f++;while(f<u.length&&o===c);o<=c&&!isNaN(o)&&(i=!0)}}catch(a){i=!1}return i};Silverlight.WaitForInstallCompletion=function(){};Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var n=navigator.mimeTypes["application/x-silverlight-2"],i=navigator.mimeTypes["application/x-silverlight-2-b2"],r=navigator.mimeTypes["application/x-silverlight-2-b1"],t=r;i&&(t=i);!n&&(r||i)?Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0):n&&t&&n.enabledPlugin&&t.enabledPlugin&&n.enabledPlugin.description!=t.enabledPlugin.description&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0))}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||window.removeEventListener};Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup));Silverlight.createObject=function(n,t,i,r,u,f,e,o){var c=u,s=r,l,h,v,a;if(s.source=n,l={version:s.version,alt:s.alt,autoupgrade:s.autoupgrade,upgradeMessage:s.upgradeMessage},f&&(s.initParams=f),s.isWindowless&&!s.windowless&&(s.windowless=s.isWindowless),s.framerate&&!s.maxFramerate&&(s.maxFramerate=s.framerate),i&&!s.id&&(s.id=i),delete s.ignoreBrowserVer,delete s.inplaceInstallPrompt,delete s.version,delete s.isWindowless,delete s.framerate,delete s.data,delete s.src,delete s.alt,delete s.autoupgrade,delete s.upgradeMessage,Silverlight.isInstalled(l.version,o)){for(h in c)if(c[h])if(h=="onLoad"&&typeof c[h]=="function"&&c[h].length!=1&&(v=c[h],c[h]=function(n){return v(document.getElementById(i),e,n)}),a=Silverlight.__getHandlerName(c[h]),a!=null)s[h]=a,c[h]=null;else throw"typeof events."+h+" must be 'function' or 'string'";slPluginHTML=Silverlight.buildHTML(s)}else slPluginHTML=Silverlight.buildPromptHTML(l);return t&&(t.innerHTML=slPluginHTML),slPluginHTML};Silverlight.buildHTML=function(n){var t=[],i;t.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"');n.id!=null&&t.push(' id="'+Silverlight.HtmlAttributeEncode(n.id)+'"');n.width!=null&&t.push(' width="'+n.width+'"');n.height!=null&&t.push(' height="'+n.height+'"');n["class"]!=null&&t.push(' class="'+n["class"]+'"');t.push(" >");delete n.id;delete n.width;delete n.height;delete n["class"];for(i in n)n[i]&&t.push('<param name="'+Silverlight.HtmlAttributeEncode(i)+'" value="'+Silverlight.HtmlAttributeEncode(n[i])+'" />');return t.push("<\/object>"),t.join("")};Silverlight.createObjectEx=function(n){var t=n,i=Silverlight.createObject(t.source,t.parentElement,t.id,t.properties,t.events,t.initParams,t.context);if(t.parentElement==null)return i};Silverlight.buildPromptHTML=function(n){var t="",r=Silverlight.fwlinkRoot,i=n.version;return Silverlight.isInstalled(null)&&n.autoupgrade&&n.upgradeMessage?t=n.upgradeMessage:n.alt?t=n.alt:(i||(i=""),t="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/><\/a>",t=t.replace("{1}",i),t=t.replace("{2}",r+"161376")),t};Silverlight.getSilverlight=function(n){var i,t,r,u;Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight();i="";t=String(n).split(".");t.length>1&&(r=parseInt(t[0]),i=isNaN(r)||r<2?"1.0":t[0]+"."+t[1]);u="";i.match(/^\d+\056\d+$/)&&(u="&v="+i);Silverlight.followFWLink("149156"+u)};Silverlight.followFWLink=function(n){top.location=Silverlight.fwlinkRoot+String(n)};Silverlight.HtmlAttributeEncode=function(n){var t,i="",r;if(n==null)return null;for(r=0;r<n.length;r++)t=n.charCodeAt(r),i=t>96&&t<123||t>64&&t<91||t>43&&t<58&&t!=47||t==95?i+String.fromCharCode(t):i+"&#"+t+";";return i};Silverlight.default_error_handler=function(n,t){var r=t.ErrorType,u=t.ErrorCode,i="\nSilverlight error message     \n";i+="ErrorCode: "+u+"\n";i+="ErrorType: "+r+"       \n";i+="Message: "+t.ErrorMessage+"     \n";r=="ParserError"?(i+="XamlFile: "+t.xamlFile+"     \n",i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"):r=="RuntimeError"&&(t.lineNumber!=0&&(i+="Line: "+t.lineNumber+"     \n",i+="Position: "+t.charPosition+"     \n"),i+="MethodName: "+t.methodName+"     \n");alert(i)};Silverlight.__cleanup=function(){for(var n=Silverlight._silverlightCount-1;n>=0;n--)window["__slEvent"+n]=null;Silverlight._silverlightCount=0;window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup)};Silverlight.__getHandlerName=function(n){var t="",i;return typeof n=="string"?t=n:typeof n=="function"?(Silverlight._silverlightCount==0&&(window.addEventListener?window.addEventListener("unload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup)),i=Silverlight._silverlightCount++,t="__slEvent"+i,window[t]=n):t=null,t};Silverlight.onRequiredVersionAvailable=function(){};Silverlight.onRestartRequired=function(){};Silverlight.onUpgradeRequired=function(){};Silverlight.onInstallRequired=function(){};Silverlight.IsVersionAvailableOnError=function(n,t){var i=!1;try{t.ErrorCode!=8001||Silverlight.__installationEventFired?t.ErrorCode!=8002||Silverlight.__installationEventFired?t.ErrorCode==5014||t.ErrorCode==2106?Silverlight.__verifySilverlight2UpgradeSuccess(t.getHost())&&(i=!0):i=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0)}catch(r){}return i};Silverlight.IsVersionAvailableOnLoad=function(n){var t=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(n.getHost())&&(t=!0)}catch(i){}return t};Silverlight.__verifySilverlight2UpgradeSuccess=function(n){var i=!1,r="5.0.61118.0",t=null;try{n.IsVersionSupported(r+".99")?(t=Silverlight.onRequiredVersionAvailable,i=!0):t=n.IsVersionSupported(r+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired;t&&!Silverlight.__installationEventFired&&(t(),Silverlight.__installationEventFired=!0)}catch(u){}return i};
function silverlightLoaded(n){if(!ch9.functions.VideoPlayer)try{ch9.functions.silverlightPresenter.setPlayer(n.getHost().content.Player)}catch(t){console.log("error loading silverlight player: "+t)}}(function(n){"use strict";var t=ch9.functions,u=t.helpers,r=t.Resources,i=u&&u.debug,f={source:"/scripts/player/silverlight/Channel9.xap?v=1.75",version:"5.0.61118.0"};t.SilverlightPresenterConstructor=function(u,e,o){var s=this,c=t.playerPresenter,l,h;return this.player=n.extend({},f,u),this.episode=e,this.user=o,this.videos={smooth:n("ul.smooth a:first",this.player.container).length?n("ul.smooth a:first",this.player.container).attr("href"):"",progressive:n("ul.progressive a:first",this.player.container).length?n("ul.progressive a:first",this.player.container).attr("href"):"",defaultUrl:this.player.defaultVideoUrl},this.deliveryMethod=!this.videos.progressive&&!this.videos.smooth?{delivery:"",video:this.videos.defaultUrl}:!this.videos.smooth||this.player.playerPreference=="progressive"?{delivery:"progressivedownload",video:this.videos.progressive}:{delivery:"adaptivestreaming",video:this.videos.smooth},l=function(n,t,i){var r=[],u,f;if(r.push('<object type="application/x-silverlight-2" data="data:application/x-silverlight-2,"'),n.id!=null&&r.push(' id="'+n.id+'"'),n["class"]!=null&&r.push(' class="'+n["class"]+'"'),n.width!=null&&r.push(' width="'+n.width+'"'),n.height!=null&&r.push(' height="'+n.height+'"'),r.push(">"),n.allowfullscreen!=null&&n.allowfullscreen==!0&&r.push('<param name="allowfullscreen" value="'+n.allowfullscreen+'"/>'),n.allowscriptaccess!=null&&r.push('<param name="allowscriptaccess" value="'+n.allowscriptaccess+'"/>'),n.autoupgrade!=null&&r.push('<param name="autoUpgrade" value="'+n.autoupgrade+'"/>'),n.background!=null&&r.push('<param name="background" value="'+n.background+'"/>'),n.minversion!=null&&r.push('<param name="minRuntimeVersion" value="'+n.minversion+'"/>'),n.source!=null&&r.push('<param name="source" value="'+n.source+'"/>'),n.windowless!=null&&r.push('<param name="windowless" value="'+n.windowless+'"/>'),n.onload!=null&&r.push('<param name="onload" value="'+n.onload+'"/>'),t){r.push('<param name="initParams" value="');u="";for(f in t)u!=""&&(u+=","),u+=f+"="+t[f];r.push(u+'"/>')}return i!=null&&r.push(i),r.push("<\/object>"),r.join("")},h=function(){for(var i,n,u=t.VideoPlayer.target.CreatePlaylist(),f=t.VideoPlayer.target.GetPlaylistItem(),r=0;r<s.episode.captions.length;r++)i=s.episode.captions[r],n=t.VideoPlayer.target.CreateMarkerResource(),n.Label=i.label,n.Language=i.language,n.Format=i.format.replace("webvtt","WebVTT"),n.Source=i.url,n.IsDefault=i.isdefault,f.AddMarkerResource(n);u.AddPlaylistItem(f);t.VideoPlayer.target.SetPlaylist(u)},{haveVideo:s.videos.smooth!=undefined||s.videos.progressive!=undefined,haveSmoothVideo:s.videos.smooth!=undefined,haveProgressiveVideo:s.videos.progressive!=undefined,isPlayPossible:!t.userAgent||t.userAgent.silverlightPossible(),currentVersion:s.player.version,getErrorMessage:function(){var n="<h3>Silverlight<\/h3>";return""+(t.userAgent&&t.userAgent.isMetro()?n+"<p>"+r.getString("JsVideoPlayerSilverlightNotSupported")+"<\/p>":!this.haveVideo&&this.isPlayPossible?n+"<p>"+r.getString("JsVideoPlayerSilverlightNoVideo")+"<\/p>":n+"<p>"+String.format(r.getString("JsVideoPlayerSilverlightNoPlugin"),s.player.version)+"<\/p>")},create:function(t){var r;if(!s.deliveryMethod.video)return t;var u={alt:t||"",autostart:"true",autoupgrade:"true",windowless:"true","class":"Player"},i={width:s.player.width,height:s.player.height};return n.extend(i,f,u),r="scriptablename="+i["class"]+",autostart="+i.autostart+",deliverymethod="+s.deliveryMethod.delivery+",mediaurl="+s.deliveryMethod.video+",thumbnail="+s.episode.images.playerPreview+",entryid="+s.episode.contentId,s.episode.plyCaptionStreamId&&(r+=",subplystreamid="+s.episode.plyCaptionStreamId),Silverlight.createObject(i.source,null,null,i,{onLoad:"silverlightLoaded"},r,"",!0)},setPlayer:function(r){var u,e;t.VideoPlayer=new t.VideoPlayerConstructor("silverlight",r);u=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.Play()},targetPause:function(){this.target&&this.target.Pause()},targetStop:function(){this.target&&this.target.Stop()},targetGetPosition:function(){return this.target?this.target.PlaybackPositionSeconds:null},targetGetDuration:function(){return null},targetIsPaused:function(){return this.target?this.target.IsPaused:!1},targetIsReady:function(){return this.target?this.target.IsMediaReady:!1},targetCanSeek:function(){return this.targetIsReady()},targetSeek:function(n){this.target&&this.target.SeekToPosition(n)}};n.extend(u,e);try{var f=c.getStartTime(),o=!1,l=!1;u.target.PlayStateChanged=function(){u.isReady()&&(i&&console.log("silverlight PlayStateChanged event fired && IsMediaReady"),!l&&s.episode.captions.length&&(i&&console.log("setting caption files."),h(u),l=!0),!o&&f.seconds>0&&(o=!0,i&&console.log("seeking to start time: "+f.seconds),u.seek(f)),u.target.IsPaused&&t.Services&&t.VideoPlayer&&t.Services.addVideoProgress(s.episode,s.user))};u.target.PlaybackPositionChanged=function(){t.Services&&t.VideoPlayer?t.Services.addVideoProgress(s.episode,s.user):u.target.PlaybackPositionChanged=null}}catch(a){i&&console.log("error attaching events to silverlight player: "+a)}t.Spinner&&t.Spinner.hide()}}}})(jQuery);
/*! Player.js - v0.0.10 - 2015-01-12
* http://github.com/embedly/player.js
* Copyright (c) 2015 Embedly; Licensed BSD */
(function(n,t){function e(n){return function(){var r={method:n},t=Array.prototype.slice.call(arguments);/^get/.test(n)?(i.assert(t.length>0,"Get methods require a callback."),t.unshift(r)):(/^set/.test(n)&&(i.assert(t.length!==0,"Set methods require a value."),r.value=t[0]),t=[r]);this.send.apply(this,t)}}var i={},r,f,u;for(i.DEBUG=!1,i.VERSION="0.0.10",i.CONTEXT="player.js",i.POST_MESSAGE=!!n.postMessage,i.ENABLE_CONTEXT=!1,i.origin=function(t){return t.substr(0,2)==="//"&&(t=n.location.protocol+t),t.split("/").slice(0,3).join("/")},i.addEvent=function(n,t,i){n&&(n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i)},i.log=function(){i.log.history=i.log.history||[];i.log.history.push(arguments);n.console&&i.DEBUG&&n.console.log(Array.prototype.slice.call(arguments))},i.isString=function(n){return Object.prototype.toString.call(n)==="[object String]"},i.isObject=function(n){return Object.prototype.toString.call(n)==="[object Object]"},i.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"},i.isNone=function(n){return n===null||n===undefined},i.has=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},i.indexOf=function(n,t){if(n==null)return-1;var i=0,r=n.length;if(Array.prototype.IndexOf&&n.indexOf===Array.prototype.IndexOf)return n.indexOf(t);for(;i<r;i++)if(n[i]===t)return i;return-1},i.assert=function(n,t){if(!n)throw t||"Player.js Assert Failed";},i.Keeper=function(){this.init()},i.Keeper.prototype.init=function(){this.data={}},i.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},i.Keeper.prototype.has=function(n,t){var u,r;if(!this.data.hasOwnProperty(n))return!1;if(i.isNone(t))return!0;for(u=this.data[n],r=0;r<u.length;r++)if(u[r].id===t)return!0;return!1},i.Keeper.prototype.add=function(n,t,i,r,u){var f={id:n,event:t,cb:i,ctx:r,one:u};this.has(t)?this.data[t].push(f):this.data[t]=[f]},i.Keeper.prototype.execute=function(n,t,r,u){var e,o,s,f,h,c;if(!this.has(n,t))return!1;for(e=[],o=[],s=0;s<this.data[n].length;s++)f=this.data[n][s],i.isNone(t)||!i.isNone(t)&&f.id===t?(o.push({cb:f.cb,ctx:f.ctx?f.ctx:u,data:r}),f.one===!1&&e.push(f)):e.push(f);for(e.length===0?delete this.data[n]:this.data[n]=e,h=0;h<o.length;h++)c=o[h],c.cb.call(c.ctx,c.data)},i.Keeper.prototype.on=function(n,t,i,r){this.add(n,t,i,r,!1)},i.Keeper.prototype.one=function(n,t,i,r){this.add(n,t,i,r,!0)},i.Keeper.prototype.off=function(n,t){var e=[],u,f,r;if(!this.data.hasOwnProperty(n))return e;for(u=[],f=0;f<this.data[n].length;f++)r=this.data[n][f],i.isNone(t)||r.cb===t?i.isNone(r.id)||e.push(r.id):u.push(r);return u.length===0?delete this.data[n]:this.data[n]=u,e},i.Player=function(n,t){if(!(this instanceof i.Player))return new i.Player(n,t);this.init(n,t)},i.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},i.EVENTS.all=function(){var t=[];for(var n in i.EVENTS)i.has(i.EVENTS,n)&&i.isString(i.EVENTS[n])&&t.push(i.EVENTS[n]);return t},i.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},i.METHODS.all=function(){var t=[];for(var n in i.METHODS)i.has(i.METHODS,n)&&i.isString(i.METHODS[n])&&t.push(i.METHODS[n]);return t},i.READIED=[],i.Player.prototype.init=function(r){var u=this;i.isString(r)&&(r=t.getElementById(r));this.elem=r;this.origin=i.origin(r.src);this.keeper=new i.Keeper;this.isReady=!1;this.queue=[];this.events=i.EVENTS.all();this.methods=i.METHODS.all();i.POST_MESSAGE?i.addEvent(n,"message",function(n){u.receive(n)}):i.log("Post Message is not Available.");i.indexOf(i.READIED,r.src)>-1?u.loaded=!0:this.elem.onload=function(){u.loaded=!0}},i.Player.prototype.send=function(n,t,r){if(n.context=i.CONTEXT,n.version=i.VERSION,t){var u=this.keeper.getUUID();n.listener=u;this.keeper.one(u,n.method,t,r)}return!this.isReady&&n.value!=="ready"?(i.log("Player.queue",n),this.queue.push(n),!1):(i.log("Player.send",n,this.origin),this.loaded===!0&&this.elem.contentWindow.postMessage(JSON.stringify(n),this.origin),!0)},i.Player.prototype.receive=function(n){if(i.log("Player.receive",n),n.origin!==this.origin)return!1;var t;try{t=JSON.parse(n.data)}catch(r){return!1}if(i.ENABLE_CONTEXT&&t.context!==i.CONTEXT)return!1;t.event==="ready"&&t.value&&t.value.src===this.elem.src&&this.ready(t);this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this)},i.Player.prototype.ready=function(n){var r,t;if(this.isReady===!0)return!1;for(n.value.events&&(this.events=n.value.events),n.value.methods&&(this.methods=n.value.methods),this.isReady=!0,this.loaded=!0,r=0;r<this.queue.length;r++)t=this.queue[r],i.log("Player.dequeue",t),n.event==="ready"&&this.keeper.execute(t.event,t.listener,!0,this),this.send(t);this.queue=[]},i.Player.prototype.on=function(n,t,i){var r=this.keeper.getUUID();if(n==="ready")this.keeper.one(r,n,t,i);else this.keeper.on(r,n,t,i);return this.send({method:"addEventListener",value:n,listener:r}),!0},i.Player.prototype.off=function(n,t){var r=this.keeper.off(n,t),u;if(i.log("Player.off",r),r.length>0)for(u in r)return this.send({method:"removeEventListener",value:n,listener:r[u]}),!0;return!1},i.Player.prototype.supports=function(n,t){var u,r;for(i.assert(i.indexOf(["method","event"],n)>-1,'evtOrMethod needs to be either "event" or "method" got '+n),t=i.isArray(t)?t:[t],u=n==="event"?this.events:this.methods,r=0;r<t.length;r++)if(i.indexOf(u,t[r])===-1)return!1;return!0},r=0,f=i.METHODS.all().length;r<f;r++)u=i.METHODS.all()[r],i.Player.prototype.hasOwnProperty(u)||(i.Player.prototype[u]=e(u));n.playerjs=i;i.addEvent(n,"message",function(n){var t;try{t=JSON.parse(n.data)}catch(r){return!1}if(i.ENABLE_CONTEXT&&t.context!==i.CONTEXT)return!1;t.event==="ready"&&t.value&&t.value.src&&i.READIED.push(t.value.src)});i.Receiver=function(n,t){this.init(n,t)};i.Receiver.prototype.init=function(r,u){var f=this;this.isReady=!1;this.origin=i.origin(t.referrer);this.methods={};this.supported={events:r?r:i.EVENTS.all(),methods:u?u:i.METHODS.all()};this.eventListeners={};this.reject=!(n.self!==n.top&&i.POST_MESSAGE);this.reject||i.addEvent(n,"message",function(n){f.receive(n)})};i.Receiver.prototype.receive=function(t){var r,u,f;if(t.origin!==this.origin)return!1;if(r={},i.isObject(t.data))r=t.data;else try{r=n.JSON.parse(t.data)}catch(e){i.log("JSON Parse Error",e)}if((i.log("Receiver.receive",t,r),!r.method)||i.ENABLE_CONTEXT&&r.context!==i.CONTEXT)return!1;if(i.indexOf(i.METHODS.all(),r.method)===-1)return this.emit("error",{code:2,msg:'Invalid Method "'+r.method+'"'}),!1;u=i.isNone(r.listener)?null:r.listener;r.method==="addEventListener"?(this.eventListeners.hasOwnProperty(r.value)?i.indexOf(this.eventListeners[r.value],u)===-1&&this.eventListeners[r.value].push(u):this.eventListeners[r.value]=[u],r.value==="ready"&&this.isReady&&this.ready()):r.method==="removeEventListener"?this.eventListeners.hasOwnProperty(r.value)&&(f=i.indexOf(this.eventListeners[r.value],u),f>-1&&this.eventListeners[r.value].splice(f,1),this.eventListeners[r.value].length===0&&delete this.eventListeners[r.value]):this.get(r.method,r.value,u)};i.Receiver.prototype.get=function(n,t,i){var f=this,r,u;if(!this.methods.hasOwnProperty(n))return this.emit("error",{code:3,msg:'Method Not Supported"'+n+'"'}),!1;r=this.methods[n];n.substr(0,3)==="get"?(u=function(t){f.send(n,t,i)},r.call(this,u)):r.call(this,t)};i.Receiver.prototype.on=function(n,t){this.methods[n]=t};i.Receiver.prototype.send=function(t,r,u){var f,e;if(i.log("Receiver.send",t,r,u),this.reject)return i.log("Receiver.send.reject",t,r,u),!1;f={context:i.CONTEXT,version:i.VERSION,event:t};i.isNone(r)||(f.value=r);i.isNone(u)||(f.listener=u);e=JSON.stringify(f);n.parent.postMessage(e,this.origin===""?"*":this.origin)};i.Receiver.prototype.emit=function(n,t){var r,u;if(!this.eventListeners.hasOwnProperty(n))return!1;for(i.log("Instance.emit",n,t,this.eventListeners[n]),r=0;r<this.eventListeners[n].length;r++)u=this.eventListeners[n][r],this.send(n,t,u);return!0};i.Receiver.prototype.ready=function(){i.log("Receiver.ready");this.isReady=!0;var t={src:n.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",t)||this.send("ready",t)};i.HTML5Adapter=function(n){if(!(this instanceof i.HTML5Adapter))return new i.HTML5Adapter(n);this.init(n)};i.HTML5Adapter.prototype.init=function(n){i.assert(n,"playerjs.VideoJSReceiver requires a video element");var t=this.receiver=new i.Receiver;n.addEventListener("playing",function(){t.emit("play")});n.addEventListener("pause",function(){t.emit("pause")});n.addEventListener("ended",function(){t.emit("ended")});n.addEventListener("timeupdate",function(){t.emit("timeupdate",{seconds:n.currentTime,duration:n.duration})});n.addEventListener("progress",function(){t.emit("buffered",{percent:n.buffered.length})});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getPaused",function(t){t(n.paused)});t.on("getCurrentTime",function(t){t(n.currentTime)});t.on("setCurrentTime",function(t){n.currentTime=t});t.on("getDuration",function(t){t(n.duration)});t.on("getVolume",function(t){t(n.volume*100)});t.on("setVolume",function(t){n.volume=t/100});t.on("mute",function(){n.muted=!0});t.on("unmute",function(){n.muted=!1});t.on("getMuted",function(t){t(n.muted)});t.on("getLoop",function(t){t(n.loop)});t.on("setLoop",function(t){n.loop=t})};i.HTML5Adapter.prototype.ready=function(){this.receiver.ready()};i.JWPlayerAdapter=function(n){if(!(this instanceof i.JWPlayerAdapter))return new i.JWPlayerAdapter(n);this.init(n)};i.JWPlayerAdapter.prototype.init=function(n){var t,r;i.assert(n,"playerjs.JWPlayerAdapter requires a player object");t=this.receiver=new i.Receiver;this.looped=!1;n.onPause(function(){t.emit("pause")});n.onPlay(function(){t.emit("play")});n.onTime(function(n){var i=n.position,r=n.duration,u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});r=this;n.onComplete(function(){r.looped===!0?n.seek(0):t.emit("ended")});n.onError(function(){t.emit("error")});t.on("play",function(){n.play(!0)});t.on("pause",function(){n.pause(!0)});t.on("getPaused",function(t){t(n.getState()!=="PLAYING")});t.on("getCurrentTime",function(t){t(n.getPosition())});t.on("setCurrentTime",function(t){n.seek(t)});t.on("getDuration",function(t){t(n.getDuration())});t.on("getVolume",function(t){t(n.getVolume())});t.on("setVolume",function(t){n.setVolume(t)});t.on("mute",function(){n.setMute(!0)});t.on("unmute",function(){n.setMute(!1)});t.on("getMuted",function(t){t(n.getMute()===!0)});t.on("getLoop",function(n){n(this.looped)},this);t.on("setLoop",function(n){this.looped=n},this)};i.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()};i.MockAdapter=function(){if(!(this instanceof i.MockAdapter))return new i.MockAdapter;this.init()};i.MockAdapter.prototype.init=function(){var n={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){n.interval=setInterval(function(){n.currentTime+=.25;n.timeupdate({seconds:n.currentTime,duration:n.duration})},250);n.playing=!0},pause:function(){clearInterval(n.interval);n.playing=!1}},t=this.receiver=new i.Receiver;t.on("play",function(){var t=this;n.play();this.emit("play");n.timeupdate=function(n){t.emit("timeupdate",n)}});t.on("pause",function(){n.pause();this.emit("pause")});t.on("getPaused",function(t){t(!n.playing)});t.on("getCurrentTime",function(t){t(n.currentTime)});t.on("setCurrentTime",function(t){n.currentTime=t});t.on("getDuration",function(t){t(n.duration)});t.on("getVolume",function(t){t(n.volume)});t.on("setVolume",function(t){n.volume=t});t.on("mute",function(){n.mute=!0});t.on("unmute",function(){n.mute=!1});t.on("getMuted",function(t){t(n.mute)});t.on("getLoop",function(t){t(n.loop)});t.on("setLoop",function(t){n.loop=t})};i.MockAdapter.prototype.ready=function(){this.receiver.ready()};i.SublimeAdapter=function(n){if(!(this instanceof i.SublimeAdapter))return new i.SublimeAdapter(n);this.init(n)};i.SublimeAdapter.prototype.events=[i.EVENTS.READY,i.EVENTS.PLAY,i.EVENTS.PAUSE,i.EVENTS.ENDED,i.EVENTS.TIMEUPDATE,i.EVENTS.ERROR];i.SublimeAdapter.prototype.methods=[i.METHODS.PLAY,i.METHODS.PAUSE,i.METHODS.GETDURATION,i.METHODS.SETCURRENTTIME,i.METHODS.GETCURRENTTIME,i.METHODS.REMOVEEVENTLISTENER,i.METHODS.ADDEVENTLISTENER];i.SublimeAdapter.prototype.init=function(n){i.assert(n,"playerjs.SublimeAdapter requires a player object");var t=this.receiver=new i.Receiver(this.events,this.methods);n.on("pause",function(){t.emit("pause")});n.on("play",function(){t.emit("play")});n.on("timeUpdate",function(n,i){var r=n.duration(),u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});n.on("end",function(){t.emit("ended")});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getCurrentTime",function(t){t(n.playbackTime())});t.on("setCurrentTime",function(t){n.seekTo(t)});t.on("getDuration",function(t){t(n.duration())})};i.SublimeAdapter.prototype.ready=function(){this.receiver.ready()};i.VideoJSAdapter=function(n){if(!(this instanceof i.VideoJSAdapter))return new i.VideoJSAdapter(n);this.init(n)};i.VideoJSAdapter.prototype.init=function(n){i.assert(n,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new i.Receiver;n.on("pause",function(){t.emit("pause")});n.on("play",function(){t.emit("play")});n.on("timeupdate",function(){var i=n.currentTime(),r=n.duration(),u;if(!i||!r)return!1;u={seconds:i,duration:r};t.emit("timeupdate",u)});n.on("ended",function(){t.emit("ended")});n.on("error",function(){t.emit("error")});t.on("play",function(){n.play()});t.on("pause",function(){n.pause()});t.on("getPaused",function(t){t(n.paused())});t.on("getCurrentTime",function(t){t(n.currentTime())});t.on("setCurrentTime",function(t){n.currentTime(t)});t.on("getDuration",function(t){t(n.duration())});t.on("getVolume",function(t){t(n.volume()*100)});t.on("setVolume",function(t){n.volume(t/100)});t.on("mute",function(){n.volume(0)});t.on("unmute",function(){n.volume(1)});t.on("getMuted",function(t){t(n.volume()===0)});t.on("getLoop",function(t){t(n.loop())});t.on("setLoop",function(t){n.loop(t)})};i.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}})(window,document);
(function(n){"use strict";var t=ch9.functions,i=t.helpers,u=t.Resources,r=i&&i.debug,f={allowfullscreen:!0,autoplay:!0},e={officemix:"officemix"},o={officemix:{order:0}};t.OfficemixPresenterConstructor=function(s,h,c){var l=this,v=t.playerPresenter,a;return this.player=n.extend({},f,s),this.episode=h,this.user=c,this.videos=n("ul.officemix a",this.player.container).map(function(){var t=n(this);return{url:t.attr("href"),type:t.attr("rel")}}).get(),this.haveDoneSeek=!1,a=function(n){var t=[];return t.push("<iframe"),n.id!=null&&t.push(' id="'+n.id+'"'),n["class"]!=null&&t.push(' class="'+n["class"]+'"'),n.src!=null&&t.push(' src="'+n.src+'"'),n.width!=null&&t.push(' width="'+n.width+'"'),n.height!=null&&t.push(' height="'+n.height+'"'),n.autoplay!=null&&n.autoplay==!0&&t.push(" autoplay"),n.allowfullscreen!=null&&n.allowfullscreen==!0&&t.push(" allowfullscreen"),t.push(' frameborder="0"'),t.push(' onload="ch9.functions.officemixPresenter.officemixLoaded(this);"'),t.push(">"),t.push("<\/iframe>"),t.join("")},{playerId:"officemixPlayer",haveVideo:l.videos.length>0,isPlayPossible:!0,getErrorMessage:function(){var n="<h3>Office Mix<\/h3>";return""+(this.isPlayPossible&&!this.haveVideo?n+"<p>"+u.getString("JsVideoPlayerOfficeMixNoVideo")+"<\/p>":n+"<p>"+u.getString("JsVideoPlayerOfficeMixNotSupoprted")+"<\/p>")},create:function(t){var r=n.grep(l.videos,function(n){return e[n.type]});r=r.sort(i.sortVideosBy(o));var u=r&&r.length>0?r[0]:{url:""},s={id:this.playerId,"class":"Player",fallback:t},f={};return!u||!u.url?t:(f.src=i.addQueryStringParam(u.url,"play"),n.extend(f,l.player,s),a(f))},setPlayer:function(i){var f,e,u;t.VideoPlayer=new t.VideoPlayerConstructor("officemix",i);f=t.VideoPlayer;e={targetPlay:function(){this.target&&this.target.play&&typeof this.target.play=="function"&&this.target.play()},targetPause:function(){this.target&&this.target.pause&&typeof this.target.pause=="function"&&this.target.pause()},targetStop:function(){return},targetGetPosition:function(){return null},targetGetDuration:function(){return null},targetIsPaused:function(){return!1},targetIsReady:function(){return!0},targetSeek:function(n){this.target&&this.target.setCurrentTime(n)},targetCanSeek:function(){return this.target?this.target.supports("method","setCurrentTime"):!1}};n.extend(f,e);try{u=v.getStartTime();u.seconds>0&&(r&&console.log("seeking to start time: "+u.seconds),f.seek(u))}catch(o){r&&console.log("error attaching events to Office Mix player: "+o)}},officemixLoaded:function(n){if(t.Spinner&&t.Spinner.hide(),!t||!t.VideoPlayer)try{playerjs&&typeof playerjs!="undefined"&&(n=new playerjs.Player(n));this.setPlayer(n)}catch(i){r&&console.log("error loading Office Mix player: "+i)}}}}})(jQuery);
window._=window._||{};_={prepareAttributes:function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i["ms."+t]=_.truncateString(jQuery.trim(n[t])));return i},prepareAWAAttributes:function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i["data-bi-"+t]=_.truncateString(jQuery.trim(n[t])));return i},truncateString:function(n){var t=100;return n.length>t?n.substring(0,t-3)+"...":n}};window.analytics=window.analytics||{};window.analytics.awaUtilities=window.analytics.awaUtilities||{};var awaUtil=window.analytics.awaUtilities;window.analytics.awaUtilities={setAWAAttributes:function(n,t){var i=_.prepareAWAAttributes(t);n.attr(i)},getMetaTagContent:function(n){return jQuery('meta[name="'+n+'"]').attr("content")},awaPageActionBuilder:function(n,t,i){var r={};r.contentTags=t===undefined?{}:t;jQuery.extend(r,n,i);awa.ct.captureContentPageAction(r)},readCookie:function(n){for(var r=n+"=",u=document.cookie.split(";"),t,i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null},validateCookie:function(n,t){var i=decodeURI(window.awaUtilities.readCookie(n));return!i||i.indexOf(t)===-1?!1:!0},getParameterByName:function(n){var t=new RegExp("[?&]"+n+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},setMetaTag:function(n,t){var r=document.createElement("meta"),i=document.getElementsByTagName("script");r.name=n;r.content=t;i.length&&(i=i[0],i.parentNode.insertBefore(r,i))},insertScript:function(n,t,i){var u=document.getElementsByTagName("head")[0],r=document.createElement("script");r.id=t;r.type="text/javascript";i!==undefined&&(r.onload=i);r.src=n;u.appendChild(r)}};
(function(n){"use strict";var r=ch9.functions,t=window.analytics.awaUtilities,u="channel9.msdn.com",s="//az725175.vo.msecnd.net/scripts/jsll-4.js",h={syncMuid:ch9.value.jsllMode=="full",useBeacon:!0,useDefaultContentName:!0,cookiesToCollect:["c9id","aam_uuid","MUID","MSFPC","ANON"],muidDomain:"microsoft.com",autoCapture:{onUnload:!0,pageView:!0,onLoad:!1,click:!0,scroll:!1,resize:!1,context:!1,jsError:!1,addin:!1,perf:!1},coreData:{appId:{"channel9.msdn.com":"ch9","channel9.microsoft.com":"ch9"}[location.hostname]||"JsllTest"}},f=[],i=[],c=function(){var f=document.location.host===u?"PROD":"PPE",r=document.cookie.slice(document.cookie.indexOf("c9id=")+5),e=r.slice(0,r.indexOf(";")),o=document.getElementsByClassName("playerContainer").length>0?"video page":document.getElementsByClassName("withContent").length>0?"topic page":undefined,i={"ms.env":f,"ms.pagetype":o,"ms.partnerid":e},n,t;for(n in i)i[n]!==undefined&&(t=document.createElement("meta"),t.name=n,t.content=i[n],document.head.appendChild(t))},l=function(){var n={"awa-aud":"dev","awa-pgtype":"topic page","awa-env":document.location.host===u?"prod":"dev"},r,f,i,t;document.getElementsByClassName("playerContainer").length>0&&(n["awa-pgtype"]="video page",n["awa-pgtop"]=document.getElementsByName("keywords")[0].content,n["awa-asst"]=document.getElementsByTagName("body")[0].getAttribute("data-guid"));(document.location.pathname==="/Search"||document.location.pathname==="/search")&&(r=new RegExp("[?&]term=([^&]*)").exec(window.location.search),f=decodeURIComponent(r[1].replace(/\+/g," ")),n["awa-pgtype"]="search page",n["awa-srchscope"]=f);(document.location.pathname==="/"&&document.getElementsByClassName("liveEventHomepage").length===0||document.location.pathname==="/home")&&(n["awa-pgtype"]="homepage");document.getElementsByClassName("liveEventHomepage").length===1&&(n["awa-pgtype"]="live event");for(i in n)t=document.createElement("meta"),t.name=i,t.content=n[i],document.head.appendChild(t)},a=function(){var i=n(this);t.setAWAAttributes(i,{area:"logo",name:"ch9 logo",slot:"1",type:"image"})},v=function(){var i=n(this),r=n.trim(i.text().toLowerCase()),u=i.closest("li").index()+1;t.setAWAAttributes(i,{area:"main nav",name:r,slot:u,type:"link"})},y=function(){var i=n(this),r=n.trim(i.text().toLowerCase()),u=i.closest("li").index()+1;t.setAWAAttributes(i,{area:"footer:social",name:r,slot:u})},p=function(){var i=n(this),r=n.trim(i.text().toLowerCase()),u=i.closest("li").index()+1;t.setAWAAttributes(i,{area:"footer:link list",name:r,slot:u})},w=function(){var i=n(this),r=n.trim(i.text().toLowerCase()),u=2,f=i.closest(".userHolder").length>0?"link":"button";i.attr("class")!=="signInOut"?(r="search",u=1):(r="sign in",u=2);i.closest(".userHolder").length===0?t.setAWAAttributes(i,{area:"aux nav",name:r,slot:2,type:"button"}):t.setAWAAttributes(i,{area:"aux nav",name:r,slot:2,type:f,scn:"login",scnstp:"login start",stpnum:"1"})},b=function(){var i=n(this);t.setAWAAttributes(i,{area:"aux nav",name:"view profile",slot:2,type:"link"})},k=function(){var i=n(this);t.setAWAAttributes(i,{bhvr:20,scn:"login",scnstp:"login start",stpnum:"1"})},d=function(){var i=n(this);t.setAWAAttributes(i,{bhvr:22,scn:"comment",scnstp:"comment submit",name:"comment"})},g=function(){var i=n(this),r={twitter:"twitter.com",facebook:"facebook.com",reddit:"reddit.com",copy:"copy"},u,e=i.attr("href")===undefined?"copy":i.attr("href").toLowerCase();for(var f in r)e.indexOf(r[f])>-1&&(u=f);t.setAWAAttributes(i,{bhvr:120,scn:"social share",socchn:u})},nt=function(){var i=n(this);t.setAWAAttributes(i,{bhvr:22,scn:"embed code",scnstp:"copy embed code"})},tt=function(){var i=n(this);t.setAWAAttributes(i,{bhvr:22,scn:"video queue",scnstp:"add video to queue"})},it=function(){var i=n(this),r=i.attr("class")==="featured"?"featured content":r=n.trim(i.find("h2 a:first-child").text().toLowerCase());t.setAWAAttributes(i,{area:r})},rt=function(){var i=n(this),r=n.trim(i.closest("article").find("img").attr("alt").toLowerCase());t.setAWAAttributes(i,{name:r,type:"link"})},ut=function(){var i=n(this),r=i.closest("article").index();t.setAWAAttributes(i,{slot:r})},ft=function(){var i=n(this);t.setAWAAttributes(i,{area:"main nav",name:"search box",slot:"5",type:"input"})},ri=function(){var i=n(this),r=i.attr("id"),u=n.trim(i.text().toLowerCase()),f=i.closest("fieldset").index();t.setAWAAttributes(i,{area:"search filters",id:r,name:u,slot:f,type:"input"})},ui=function(){var i=n(this);t.setAWAAttributes(i,{dnt:""})},et=function(){var i=n(this),r=i.closest("li").index()+1,u=i.closest("li").find("img").attr("alt").toLowerCase(),f=Number(n("ul .selected").text());t.setAWAAttributes(i,{area:"search results",srchlinkpos:r+(f-1)*15,name:u,slot:r})},ot=function(){var i=n(this),r=i.closest("li").index()+1,u=n.trim(i.text().toLowerCase()),f=Number(n("ul .selected").text());t.setAWAAttributes(i,{area:"search results",name:u,slot:r,srchlinkpos:r+(f-1)*15})},st=function(){var i=Number(n("ul .selected").text()),r=Number(n(".paging li:last-child() a").text());t.setMetaTag("awa-pgidx",i);t.setMetaTag("awa-pgtot",r)},ht=function(){localStorage.setItem("awaSignInStart",!0)},ct=function(){if(localStorage.getItem("awaSignInStart")==="true"&&document.location.pathname.indexOf("/register")===-1)t.awaPageActionBuilder({behavior:22,actionType:"A"},{scn:"login",scnstp:"login complete",stpnum:"2"}),localStorage.removeItem("awaSignInStart")},lt=function(){localStorage.setItem("awaReg","start")},at=function(){t.awaPageActionBuilder({behavior:20,actionType:"A"},{scn:"ch9 registration",scnstp:"registration start",stpnum:"1"})},vt=function(){if(localStorage.getItem("awaReg")==="start"&&document.referrer.indexOf(u+"/register")>-1)t.awaPageActionBuilder({behavior:22,actionType:"A"},{scn:"ch9 registration",scnstp:"registration complete",stpnum:"2"}),localStorage.removeItem("awaReg")},yt=function(){var e=n(this),i=e.attr("download").toLowerCase(),r,u,f;if(i.indexOf(".vtt")>-1)r=i.split("_")[1].replace(".vtt"," captions");else{u={mp3:".mp3","low mp4":"low.mp4","mid mp4":"mid.mp4","high mp4":"high.mp4"};for(f in u)i.indexOf(u[f])>-1&&(r=f)}var o=n.trim(n("body").data("episodetitle").toLowerCase()),s=n("body").data("guid"),h={scn:"download",dlnm:o,dlid:s,dltype:r};t.awaPageActionBuilder({actionType:"CL",behavior:41},h)},fi=function(){var i=n(this),r=i.find("input").attr("id"),u=n.trim(i.text().toLowerCase()),f=i.closest("fieldset").index(),e={area:"search filters",id:r,name:u,slot:f,type:"input"};t.awaPageActionBuilder({actionType:"CL"},e)},pt=function(n){for(var r,u=(n/10).toFixed(4),t=0;t<=10;t++)f[t]=Number((u*t).toFixed(4));r=Number((n/4).toFixed(3));i[0]=r;i[1]=Number(r*3)},e=function(n,t){var i={benchmark:n,currentTime:t},r=new CustomEvent("videoBenchmark",{detail:i});document.dispatchEvent(r)},wt=function(n){for(var u=f,r=i,t=0;t<=u.length;t++)n>=u[t]&&(e(t*10,u[t]),delete f[t]);for(t=0;t<=r.length;t++)n>=r[t]&&(t===0?(e("25",r[t]),delete i[t]):t===1&&(e("75",r[t]),delete i[t]))},bt=function(){if(r.VideoPlayer){pt(r.VideoPlayer.getDuration());var t=n("video.Player");if(t.length)t.on("timeupdate",function(){wt(Number(r.VideoPlayer.getPosition().toFixed(3)))})}},kt=function(i){var u=i.detail.benchmark,f=i.detail.currentTime,e=243,s=n.trim(n("body").data("episodetitle").toLowerCase()),h=n("body").data("guid"),c=r.VideoPlayer.getDuration(),o;u===0?e=240:u===100&&(e=245);o={behavior:e,actionType:"A"};f={vidnm:s,vidid:h,viddur:c,vidpct:u,vidwt:f};t.awaPageActionBuilder(o,f)},o=function(i){var o=n(this),r=i.keyCode||i.which,u=n("#siteSearchText").val(),f,e;u!="search channel 9"&&(i.type!=="keydown"||r===13)&&(f={behavior:61,actionType:i.type==="keydown"&&r===13?"KE":"CL"},e={srchq:u},t.awaPageActionBuilder(f,e))},dt=function(){n("meta[name='awa-pgtot'],meta[name='awa-pgidx'").remove();setTimeout(function(){n(".resultsList a:not('.seriesTitle a, .averageRating')").each(et);n(".seriesTitle a").each(ot);st()},200)},gt=function(){if(awa.init(h),document.location.pathname.match(/\/player$/i)===null){if(document.location.pathname==="/register"){at();n("#register input[type=submit]").on("mousedown",lt)}document.referrer!==""&&(vt(),ct())}},ni=function(){n("a.ch9Logo").each(a);n(".mainNavigation a").each(v);n("#siteSearchText, #siteSearchButton, .signInOut").each(w);n(".userProfileExpand a[href*=Niners]").each(b);n("footer ul.sharing li a").each(y);n("footer ul.otherLinks li a").each(p);n("a.signInOut.signIn").each(k);n("form.discussion input.buttonPri[type=submit]").each(d);n(".ch9tab.share ul.sharing li a, .ch9tab.share input.copy[type=button]").each(g);n(".ch9tab.embed input.copy[type=submit]").each(nt);n(".queueHolder .toggleAdd").each(tt);n("section.featured, .bands section").each(it);n("article header > a, article header h3 > a, article .tile").each(rt);n("article a").each(ut);n("#siteSearchText, #siteSearchButton").each(ft)},ti=function(){n("a.signInOut.signIn").on("mousedown",ht);n(".download a").on("mousedown",yt);n("body").on("mousedown","#siteSearchButtonLabel, #siteSearchButton",o);n("body").on("keydown","#siteSearchText",o)},ii=function(){n(document).on("playerLoaded",bt);n(document).on("videoBenchmark",kt)};n(function(){ni();ti();ii();l();t.insertScript(s,"awaBase",gt);c();n(document).ajaxSuccess(dt)});n(window).on("message",function(n){var r,i,u;try{n&&n.originalEvent&&(r=n.originalEvent.origin,(r.substring(r.length-14,r.length)==".microsoft.com"||r.substring(r.length-11,r.length)==".studios.ms")&&n.originalEvent.data&&n.originalEvent.data.data&&n.originalEvent.data.type==="jsll"&&(i=n.originalEvent.data.data,(i.actionType||i.actionType===0)&&(i.behavior||i.behavior===0)&&(u={behavior:i.behavior,actionType:i.actionType},delete i.actionType,delete i.behavior,t.awaPageActionBuilder(u,i))))}catch(n){}})})(jQuery);